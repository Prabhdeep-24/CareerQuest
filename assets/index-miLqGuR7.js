import{c as _n,d as An}from"./index-CdhNCFc0.js";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class te{}function _(s,n){const e=/\{([^}]+)\}/g;return s.replace(e,(t,r)=>{if(Object.prototype.hasOwnProperty.call(n,r)){const l=n[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function o(s,n,e){for(let l=0;l<n.length-1;l++){const a=n[l];if(a.endsWith("[]")){const u=a.slice(0,-2);if(!(u in s))if(Array.isArray(e))s[u]=Array.from({length:e.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(s[u])){const f=s[u];if(Array.isArray(e))for(let c=0;c<f.length;c++){const d=f[c];o(d,n.slice(l+1),e[c])}else for(const c of f)o(c,n.slice(l+1),e)}return}else if(a.endsWith("[0]")){const u=a.slice(0,-3);u in s||(s[u]=[{}]);const f=s[u];o(f[0],n.slice(l+1),e);return}(!s[a]||typeof s[a]!="object")&&(s[a]={}),s=s[a]}const t=n[n.length-1],r=s[t];if(r!==void 0){if(!e||typeof e=="object"&&Object.keys(e).length===0||e===r)return;if(typeof r=="object"&&typeof e=="object"&&r!==null&&e!==null)Object.assign(r,e);else throw new Error(`Cannot set value for an existing key. Key: ${t}`)}else s[t]=e}function i(s,n){try{if(n.length===1&&n[0]==="_self")return s;for(let e=0;e<n.length;e++){if(typeof s!="object"||s===null)return;const t=n[e];if(t.endsWith("[]")){const r=t.slice(0,-2);if(r in s){const l=s[r];return Array.isArray(l)?l.map(a=>i(a,n.slice(e+1))):void 0}else return}else s=s[t]}return s}catch(e){if(e instanceof TypeError)return;throw e}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function x(s,n){if(!n||typeof n!="string")throw new Error("model is required and must be a string");if(s.isVertexAI()){if(n.startsWith("publishers/")||n.startsWith("projects/")||n.startsWith("models/"))return n;if(n.indexOf("/")>=0){const e=n.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}else return`publishers/google/models/${n}`}else return n.startsWith("models/")||n.startsWith("tunedModels/")?n:`models/${n}`}function cn(s,n){const e=x(s,n);return e?e.startsWith("publishers/")&&s.isVertexAI()?`projects/${s.getProject()}/locations/${s.getLocation()}/${e}`:e.startsWith("models/")&&s.isVertexAI()?`projects/${s.getProject()}/locations/${s.getLocation()}/publishers/google/${e}`:e:""}function ce(s,n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function dn(s,n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>ce(s,e)):[ce(s,n)]}function re(s){return s!=null&&typeof s=="object"&&"parts"in s&&Array.isArray(s.parts)}function de(s){return s!=null&&typeof s=="object"&&"functionCall"in s}function pe(s){return s!=null&&typeof s=="object"&&"functionResponse"in s}function w(s,n){if(n==null)throw new Error("ContentUnion is required");return re(n)?n:{role:"user",parts:dn(s,n)}}function pn(s,n){if(!n)return[];if(s.isVertexAI()&&Array.isArray(n))return n.flatMap(e=>{const t=w(s,e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]});if(s.isVertexAI()){const e=w(s,n);return e.parts&&e.parts.length>0&&e.parts[0].text!==void 0?[e.parts[0].text]:[]}return Array.isArray(n)?n.map(e=>w(s,e)):[w(s,n)]}function S(s,n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(de(n)||pe(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[w(s,n)]}const e=[],t=[],r=re(n[0]);for(const l of n){const a=re(l);if(a!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(l);else{if(de(l)||pe(l))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(l)}}return r||e.push({role:"user",parts:dn(s,t)}),e}function Z(s,n){if(!s.isVertexAI()&&"default"in n)throw new Error("Default value is not supported in the response schema for the Gemini API.");if("anyOf"in n&&n.anyOf!==void 0)for(const e of n.anyOf)Z(s,e);if("items"in n&&n.items!==void 0&&Z(s,n.items),"properties"in n&&n.properties!==void 0)for(const e of Object.values(n.properties))Z(s,e)}function mn(s,n){return Z(s,n),n}function hn(s,n){if(typeof n=="object"&&"voiceConfig"in n)return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function oe(s,n){return n}function V(s,n){if(!Array.isArray(n))throw new Error("tool is required and must be an array of Tools");return n}function Sn(s,n,e,t=1){const r=!n.startsWith(`${e}/`)&&n.split("/").length===t;return s.isVertexAI()?n.startsWith("projects/")?n:n.startsWith("locations/")?`projects/${s.getProject()}/${n}`:n.startsWith(`${e}/`)?`projects/${s.getProject()}/locations/${s.getLocation()}/${n}`:r?`projects/${s.getProject()}/locations/${s.getLocation()}/${e}/${n}`:n:r?`${e}/${n}`:n}function G(s,n){if(typeof n!="string")throw new Error("name must be a string");return Sn(s,n,"cachedContents")}function q(s,n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}function gn(s,n){if(typeof n!="string")throw new Error("fromName must be a string");return n.startsWith("files/")?n.split("files/")[1]:n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mn(s,n){const e={};if(i(n,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const t=i(n,["thought"]);t!=null&&o(e,["thought"],t);const r=i(n,["codeExecutionResult"]);r!=null&&o(e,["codeExecutionResult"],r);const l=i(n,["executableCode"]);l!=null&&o(e,["executableCode"],l);const a=i(n,["fileData"]);a!=null&&o(e,["fileData"],a);const u=i(n,["functionCall"]);u!=null&&o(e,["functionCall"],u);const f=i(n,["functionResponse"]);f!=null&&o(e,["functionResponse"],f);const c=i(n,["inlineData"]);c!=null&&o(e,["inlineData"],c);const d=i(n,["text"]);return d!=null&&o(e,["text"],d),e}function me(s,n){const e={},t=i(n,["parts"]);t!=null&&(Array.isArray(t)?o(e,["parts"],t.map(l=>Mn(s,l))):o(e,["parts"],t));const r=i(n,["role"]);return r!=null&&o(e,["role"],r),e}function Rn(s,n){const e={};if(i(n,["response"])!==void 0)throw new Error("response parameter is not supported in Gemini API.");const t=i(n,["description"]);t!=null&&o(e,["description"],t);const r=i(n,["name"]);r!=null&&o(e,["name"],r);const l=i(n,["parameters"]);return l!=null&&o(e,["parameters"],l),e}function Pn(){return{}}function xn(s,n){const e={},t=i(n,["mode"]);t!=null&&o(e,["mode"],t);const r=i(n,["dynamicThreshold"]);return r!=null&&o(e,["dynamicThreshold"],r),e}function Dn(s,n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&o(e,["dynamicRetrievalConfig"],xn(s,t)),e}function wn(s,n){const e={},t=i(n,["functionDeclarations"]);if(t!=null&&(Array.isArray(t)?o(e,["functionDeclarations"],t.map(u=>Rn(s,u))):o(e,["functionDeclarations"],t)),i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");i(n,["googleSearch"])!=null&&o(e,["googleSearch"],Pn());const l=i(n,["googleSearchRetrieval"]);l!=null&&o(e,["googleSearchRetrieval"],Dn(s,l));const a=i(n,["codeExecution"]);return a!=null&&o(e,["codeExecution"],a),e}function Nn(s,n){const e={},t=i(n,["mode"]);t!=null&&o(e,["mode"],t);const r=i(n,["allowedFunctionNames"]);return r!=null&&o(e,["allowedFunctionNames"],r),e}function Vn(s,n){const e={},t=i(n,["functionCallingConfig"]);return t!=null&&o(e,["functionCallingConfig"],Nn(s,t)),e}function Fn(s,n,e){const t={},r=i(n,["ttl"]);e!==void 0&&r!=null&&o(e,["ttl"],r);const l=i(n,["expireTime"]);e!==void 0&&l!=null&&o(e,["expireTime"],l);const a=i(n,["displayName"]);e!==void 0&&a!=null&&o(e,["displayName"],a);const u=i(n,["contents"]);e!==void 0&&u!=null&&(Array.isArray(u)?o(e,["contents"],S(s,S(s,u).map(p=>me(s,p)))):o(e,["contents"],S(s,u)));const f=i(n,["systemInstruction"]);e!==void 0&&f!=null&&o(e,["systemInstruction"],me(s,w(s,f)));const c=i(n,["tools"]);e!==void 0&&c!=null&&(Array.isArray(c)?o(e,["tools"],c.map(p=>wn(s,p))):o(e,["tools"],c));const d=i(n,["toolConfig"]);return e!==void 0&&d!=null&&o(e,["toolConfig"],Vn(s,d)),t}function Un(s,n){const e={},t=i(n,["model"]);t!=null&&o(e,["model"],cn(s,t));const r=i(n,["config"]);return r!=null&&o(e,["config"],Fn(s,r,e)),e}function Ln(s,n){const e={},t=i(n,["name"]);t!=null&&o(e,["_url","name"],G(s,t));const r=i(n,["config"]);return r!=null&&o(e,["config"],r),e}function kn(s,n){const e={},t=i(n,["name"]);t!=null&&o(e,["_url","name"],G(s,t));const r=i(n,["config"]);return r!=null&&o(e,["config"],r),e}function Gn(s,n,e){const t={},r=i(n,["ttl"]);e!==void 0&&r!=null&&o(e,["ttl"],r);const l=i(n,["expireTime"]);return e!==void 0&&l!=null&&o(e,["expireTime"],l),t}function qn(s,n){const e={},t=i(n,["name"]);t!=null&&o(e,["_url","name"],G(s,t));const r=i(n,["config"]);return r!=null&&o(e,["config"],Gn(s,r,e)),e}function Hn(s,n,e){const t={},r=i(n,["pageSize"]);e!==void 0&&r!=null&&o(e,["_query","pageSize"],r);const l=i(n,["pageToken"]);return e!==void 0&&l!=null&&o(e,["_query","pageToken"],l),t}function Bn(s,n){const e={},t=i(n,["config"]);return t!=null&&o(e,["config"],Hn(s,t,e)),e}function Yn(s,n){const e={},t=i(n,["videoMetadata"]);t!=null&&o(e,["videoMetadata"],t);const r=i(n,["thought"]);r!=null&&o(e,["thought"],r);const l=i(n,["codeExecutionResult"]);l!=null&&o(e,["codeExecutionResult"],l);const a=i(n,["executableCode"]);a!=null&&o(e,["executableCode"],a);const u=i(n,["fileData"]);u!=null&&o(e,["fileData"],u);const f=i(n,["functionCall"]);f!=null&&o(e,["functionCall"],f);const c=i(n,["functionResponse"]);c!=null&&o(e,["functionResponse"],c);const d=i(n,["inlineData"]);d!=null&&o(e,["inlineData"],d);const p=i(n,["text"]);return p!=null&&o(e,["text"],p),e}function he(s,n){const e={},t=i(n,["parts"]);t!=null&&(Array.isArray(t)?o(e,["parts"],t.map(l=>Yn(s,l))):o(e,["parts"],t));const r=i(n,["role"]);return r!=null&&o(e,["role"],r),e}function $n(s,n){const e={},t=i(n,["example"]);t!=null&&o(e,["example"],t);const r=i(n,["pattern"]);r!=null&&o(e,["pattern"],r);const l=i(n,["default"]);l!=null&&o(e,["default"],l);const a=i(n,["maxLength"]);a!=null&&o(e,["maxLength"],a);const u=i(n,["minLength"]);u!=null&&o(e,["minLength"],u);const f=i(n,["minProperties"]);f!=null&&o(e,["minProperties"],f);const c=i(n,["maxProperties"]);c!=null&&o(e,["maxProperties"],c);const d=i(n,["anyOf"]);d!=null&&o(e,["anyOf"],d);const p=i(n,["description"]);p!=null&&o(e,["description"],p);const m=i(n,["enum"]);m!=null&&o(e,["enum"],m);const h=i(n,["format"]);h!=null&&o(e,["format"],h);const g=i(n,["items"]);g!=null&&o(e,["items"],g);const y=i(n,["maxItems"]);y!=null&&o(e,["maxItems"],y);const C=i(n,["maximum"]);C!=null&&o(e,["maximum"],C);const T=i(n,["minItems"]);T!=null&&o(e,["minItems"],T);const E=i(n,["minimum"]);E!=null&&o(e,["minimum"],E);const I=i(n,["nullable"]);I!=null&&o(e,["nullable"],I);const v=i(n,["properties"]);v!=null&&o(e,["properties"],v);const A=i(n,["propertyOrdering"]);A!=null&&o(e,["propertyOrdering"],A);const M=i(n,["required"]);M!=null&&o(e,["required"],M);const R=i(n,["title"]);R!=null&&o(e,["title"],R);const P=i(n,["type"]);return P!=null&&o(e,["type"],P),e}function Kn(s,n){const e={},t=i(n,["response"]);t!=null&&o(e,["response"],$n(s,t));const r=i(n,["description"]);r!=null&&o(e,["description"],r);const l=i(n,["name"]);l!=null&&o(e,["name"],l);const a=i(n,["parameters"]);return a!=null&&o(e,["parameters"],a),e}function Wn(){return{}}function Jn(s,n){const e={},t=i(n,["mode"]);t!=null&&o(e,["mode"],t);const r=i(n,["dynamicThreshold"]);return r!=null&&o(e,["dynamicThreshold"],r),e}function zn(s,n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&o(e,["dynamicRetrievalConfig"],Jn(s,t)),e}function Xn(s,n){const e={},t=i(n,["functionDeclarations"]);t!=null&&(Array.isArray(t)?o(e,["functionDeclarations"],t.map(f=>Kn(s,f))):o(e,["functionDeclarations"],t));const r=i(n,["retrieval"]);r!=null&&o(e,["retrieval"],r),i(n,["googleSearch"])!=null&&o(e,["googleSearch"],Wn());const a=i(n,["googleSearchRetrieval"]);a!=null&&o(e,["googleSearchRetrieval"],zn(s,a));const u=i(n,["codeExecution"]);return u!=null&&o(e,["codeExecution"],u),e}function Qn(s,n){const e={},t=i(n,["mode"]);t!=null&&o(e,["mode"],t);const r=i(n,["allowedFunctionNames"]);return r!=null&&o(e,["allowedFunctionNames"],r),e}function Zn(s,n){const e={},t=i(n,["functionCallingConfig"]);return t!=null&&o(e,["functionCallingConfig"],Qn(s,t)),e}function On(s,n,e){const t={},r=i(n,["ttl"]);e!==void 0&&r!=null&&o(e,["ttl"],r);const l=i(n,["expireTime"]);e!==void 0&&l!=null&&o(e,["expireTime"],l);const a=i(n,["displayName"]);e!==void 0&&a!=null&&o(e,["displayName"],a);const u=i(n,["contents"]);e!==void 0&&u!=null&&(Array.isArray(u)?o(e,["contents"],S(s,S(s,u).map(p=>he(s,p)))):o(e,["contents"],S(s,u)));const f=i(n,["systemInstruction"]);e!==void 0&&f!=null&&o(e,["systemInstruction"],he(s,w(s,f)));const c=i(n,["tools"]);e!==void 0&&c!=null&&(Array.isArray(c)?o(e,["tools"],c.map(p=>Xn(s,p))):o(e,["tools"],c));const d=i(n,["toolConfig"]);return e!==void 0&&d!=null&&o(e,["toolConfig"],Zn(s,d)),t}function bn(s,n){const e={},t=i(n,["model"]);t!=null&&o(e,["model"],cn(s,t));const r=i(n,["config"]);return r!=null&&o(e,["config"],On(s,r,e)),e}function jn(s,n){const e={},t=i(n,["name"]);t!=null&&o(e,["_url","name"],G(s,t));const r=i(n,["config"]);return r!=null&&o(e,["config"],r),e}function et(s,n){const e={},t=i(n,["name"]);t!=null&&o(e,["_url","name"],G(s,t));const r=i(n,["config"]);return r!=null&&o(e,["config"],r),e}function nt(s,n,e){const t={},r=i(n,["ttl"]);e!==void 0&&r!=null&&o(e,["ttl"],r);const l=i(n,["expireTime"]);return e!==void 0&&l!=null&&o(e,["expireTime"],l),t}function tt(s,n){const e={},t=i(n,["name"]);t!=null&&o(e,["_url","name"],G(s,t));const r=i(n,["config"]);return r!=null&&o(e,["config"],nt(s,r,e)),e}function ot(s,n,e){const t={},r=i(n,["pageSize"]);e!==void 0&&r!=null&&o(e,["_query","pageSize"],r);const l=i(n,["pageToken"]);return e!==void 0&&l!=null&&o(e,["_query","pageToken"],l),t}function it(s,n){const e={},t=i(n,["config"]);return t!=null&&o(e,["config"],ot(s,t,e)),e}function O(s,n){const e={},t=i(n,["name"]);t!=null&&o(e,["name"],t);const r=i(n,["displayName"]);r!=null&&o(e,["displayName"],r);const l=i(n,["model"]);l!=null&&o(e,["model"],l);const a=i(n,["createTime"]);a!=null&&o(e,["createTime"],a);const u=i(n,["updateTime"]);u!=null&&o(e,["updateTime"],u);const f=i(n,["expireTime"]);f!=null&&o(e,["expireTime"],f);const c=i(n,["usageMetadata"]);return c!=null&&o(e,["usageMetadata"],c),e}function st(){return{}}function rt(s,n){const e={},t=i(n,["nextPageToken"]);t!=null&&o(e,["nextPageToken"],t);const r=i(n,["cachedContents"]);return r!=null&&(Array.isArray(r)?o(e,["cachedContents"],r.map(l=>O(s,l))):o(e,["cachedContents"],r)),e}function b(s,n){const e={},t=i(n,["name"]);t!=null&&o(e,["name"],t);const r=i(n,["displayName"]);r!=null&&o(e,["displayName"],r);const l=i(n,["model"]);l!=null&&o(e,["model"],l);const a=i(n,["createTime"]);a!=null&&o(e,["createTime"],a);const u=i(n,["updateTime"]);u!=null&&o(e,["updateTime"],u);const f=i(n,["expireTime"]);f!=null&&o(e,["expireTime"],f);const c=i(n,["usageMetadata"]);return c!=null&&o(e,["usageMetadata"],c),e}function lt(){return{}}function ut(s,n){const e={},t=i(n,["nextPageToken"]);t!=null&&o(e,["nextPageToken"],t);const r=i(n,["cachedContents"]);return r!=null&&(Array.isArray(r)?o(e,["cachedContents"],r.map(l=>b(s,l))):o(e,["cachedContents"],r)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var j;(function(s){s.PAGED_ITEM_BATCH_JOBS="batchJobs",s.PAGED_ITEM_MODELS="models",s.PAGED_ITEM_TUNING_JOBS="tuningJobs",s.PAGED_ITEM_FILES="files",s.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(j||(j={}));class yn{constructor(n,e,t,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=e,this.init(n,t,r)}init(n,e,t){var r,l;this.nameInternal=n,this.pageInternal=e[this.nameInternal]||[],this.idxInternal=0;let a={config:{}};t?typeof t=="object"?a=Object.assign({},t):a=t:a={config:{}},a.config&&(a.config.pageToken=e.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(l=(r=a.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(n){this.init(this.nameInternal,n,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(n){return this.pageInternal[n]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const n=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:n,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const n=await this.requestInternal(this.params);return this.initNextPage(n),this.page}hasNextPage(){var n;return((n=this.params.config)===null||n===void 0?void 0:n.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ge;(function(s){s.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",s.OUTCOME_OK="OUTCOME_OK",s.OUTCOME_FAILED="OUTCOME_FAILED",s.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(ge||(ge={}));var ye;(function(s){s.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",s.PYTHON="PYTHON"})(ye||(ye={}));var Ce;(function(s){s.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",s.STRING="STRING",s.NUMBER="NUMBER",s.INTEGER="INTEGER",s.BOOLEAN="BOOLEAN",s.ARRAY="ARRAY",s.OBJECT="OBJECT"})(Ce||(Ce={}));var Te;(function(s){s.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",s.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",s.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",s.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",s.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",s.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Te||(Te={}));var Ee;(function(s){s.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",s.SEVERITY="SEVERITY",s.PROBABILITY="PROBABILITY"})(Ee||(Ee={}));var ve;(function(s){s.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",s.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",s.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",s.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",s.BLOCK_NONE="BLOCK_NONE",s.OFF="OFF"})(ve||(ve={}));var Ie;(function(s){s.MODE_UNSPECIFIED="MODE_UNSPECIFIED",s.MODE_DYNAMIC="MODE_DYNAMIC"})(Ie||(Ie={}));var _e;(function(s){s.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",s.STOP="STOP",s.MAX_TOKENS="MAX_TOKENS",s.SAFETY="SAFETY",s.RECITATION="RECITATION",s.OTHER="OTHER",s.BLOCKLIST="BLOCKLIST",s.PROHIBITED_CONTENT="PROHIBITED_CONTENT",s.SPII="SPII",s.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",s.IMAGE_SAFETY="IMAGE_SAFETY"})(_e||(_e={}));var Ae;(function(s){s.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",s.NEGLIGIBLE="NEGLIGIBLE",s.LOW="LOW",s.MEDIUM="MEDIUM",s.HIGH="HIGH"})(Ae||(Ae={}));var Se;(function(s){s.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",s.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",s.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",s.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",s.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Se||(Se={}));var Me;(function(s){s.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",s.SAFETY="SAFETY",s.OTHER="OTHER",s.BLOCKLIST="BLOCKLIST",s.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(Me||(Me={}));var Re;(function(s){s.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",s.ON_DEMAND="ON_DEMAND",s.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Re||(Re={}));var ee;(function(s){s.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",s.TEXT="TEXT",s.IMAGE="IMAGE",s.AUDIO="AUDIO"})(ee||(ee={}));var Pe;(function(s){s.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",s.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",s.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",s.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Pe||(Pe={}));var xe;(function(s){s.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",s.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",s.BALANCED="BALANCED",s.PRIORITIZE_COST="PRIORITIZE_COST"})(xe||(xe={}));var De;(function(s){s.MODE_UNSPECIFIED="MODE_UNSPECIFIED",s.MODE_DYNAMIC="MODE_DYNAMIC"})(De||(De={}));var we;(function(s){s.MODE_UNSPECIFIED="MODE_UNSPECIFIED",s.AUTO="AUTO",s.ANY="ANY",s.NONE="NONE"})(we||(we={}));var Ne;(function(s){s.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",s.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",s.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",s.BLOCK_NONE="BLOCK_NONE"})(Ne||(Ne={}));var Ve;(function(s){s.DONT_ALLOW="DONT_ALLOW",s.ALLOW_ADULT="ALLOW_ADULT",s.ALLOW_ALL="ALLOW_ALL"})(Ve||(Ve={}));var Fe;(function(s){s.auto="auto",s.en="en",s.ja="ja",s.ko="ko",s.hi="hi"})(Fe||(Fe={}));var Ue;(function(s){s.STATE_UNSPECIFIED="STATE_UNSPECIFIED",s.PROCESSING="PROCESSING",s.ACTIVE="ACTIVE",s.FAILED="FAILED"})(Ue||(Ue={}));var Le;(function(s){s.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",s.UPLOADED="UPLOADED",s.GENERATED="GENERATED"})(Le||(Le={}));var ke;(function(s){s.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",s.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",s.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",s.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",s.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(ke||(ke={}));var Ge;(function(s){s.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",s.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",s.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",s.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Ge||(Ge={}));var qe;(function(s){s.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",s.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",s.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",s.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(qe||(qe={}));var He;(function(s){s.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",s.TEXT="TEXT",s.IMAGE="IMAGE",s.VIDEO="VIDEO",s.AUDIO="AUDIO",s.DOCUMENT="DOCUMENT"})(He||(He={}));var Be;(function(s){s.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",s.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",s.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Be||(Be={}));var Ye;(function(s){s.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",s.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",s.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Ye||(Ye={}));var $e;(function(s){s.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",s.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",s.NO_INTERRUPTION="NO_INTERRUPTION"})($e||($e={}));var Ke;(function(s){s.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",s.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",s.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Ke||(Ke={}));class z{get text(){var n,e,t,r,l,a,u,f;if(((r=(t=(e=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||e===void 0?void 0:e.content)===null||t===void 0?void 0:t.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",d=!1;const p=[];for(const m of(f=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[h,g]of Object.entries(m))h!=="text"&&h!=="thought"&&(g!==null||g!==void 0)&&p.push(h);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;d=!0,c+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?c:void 0}get functionCalls(){var n,e,t,r,l,a,u,f;if(((r=(t=(e=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||e===void 0?void 0:e.content)===null||t===void 0?void 0:t.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(f=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var n,e,t,r,l,a,u,f,c;if(((r=(t=(e=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||e===void 0?void 0:e.content)===null||t===void 0?void 0:t.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(f=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((d==null?void 0:d.length)!==0)return(c=d==null?void 0:d[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var n,e,t,r,l,a,u,f,c;if(((r=(t=(e=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||e===void 0?void 0:e.content)===null||t===void 0?void 0:t.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(f=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((d==null?void 0:d.length)!==0)return(c=d==null?void 0:d[0])===null||c===void 0?void 0:c.output}}class We{}class Je{}class ze{}class at{}class Xe{}class Qe{}class ft{}class le{constructor(n){const e={};for(const t of n.headers.entries())e[t[0]]=t[1];this.headers=e,this.responseInternal=n}json(){return this.responseInternal.json()}}class ct{}class dt{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pt extends te{constructor(n){super(),this.apiClient=n,this.list=async(e={})=>new yn(j.PAGED_ITEM_CACHED_CONTENTS,t=>this.listInternal(t),await this.listInternal(e),e)}async create(n){var e,t;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=bn(this.apiClient,n);return l=_("cachedContents",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(f=>f.json()),r.then(f=>b(this.apiClient,f))}else{const u=Un(this.apiClient,n);return l=_("cachedContents",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),r.then(f=>O(this.apiClient,f))}}async get(n){var e,t;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=jn(this.apiClient,n);return l=_("{name}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(f=>f.json()),r.then(f=>b(this.apiClient,f))}else{const u=Ln(this.apiClient,n);return l=_("{name}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),r.then(f=>O(this.apiClient,f))}}async delete(n){var e,t;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=et(this.apiClient,n);return l=_("{name}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(f=>f.json()),r.then(()=>{const f=lt(),c=new Xe;return Object.assign(c,f),c})}else{const u=kn(this.apiClient,n);return l=_("{name}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),r.then(()=>{const f=st(),c=new Xe;return Object.assign(c,f),c})}}async update(n){var e,t;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=tt(this.apiClient,n);return l=_("{name}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(f=>f.json()),r.then(f=>b(this.apiClient,f))}else{const u=qn(this.apiClient,n);return l=_("{name}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),r.then(f=>O(this.apiClient,f))}}async listInternal(n){var e,t;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=it(this.apiClient,n);return l=_("cachedContents",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(f=>f.json()),r.then(f=>{const c=ut(this.apiClient,f),d=new Qe;return Object.assign(d,c),d})}else{const u=Bn(this.apiClient,n);return l=_("cachedContents",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),r.then(f=>{const c=rt(this.apiClient,f),d=new Qe;return Object.assign(d,c),d})}}}function Ze(s){var n=typeof Symbol=="function"&&Symbol.iterator,e=n&&s[n],t=0;if(e)return e.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&t>=s.length&&(s=void 0),{value:s&&s[t++],done:!s}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function D(s){return this instanceof D?(this.v=s,this):new D(s)}function ne(s,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e.apply(s,n||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(h){return function(g){return Promise.resolve(g).then(h,p)}}function u(h,g){t[h]&&(r[h]=function(y){return new Promise(function(C,T){l.push([h,y,C,T])>1||f(h,y)})},g&&(r[h]=g(r[h])))}function f(h,g){try{c(t[h](g))}catch(y){m(l[0][3],y)}}function c(h){h.value instanceof D?Promise.resolve(h.value.v).then(d,p):m(l[0][2],h)}function d(h){f("next",h)}function p(h){f("throw",h)}function m(h,g){h(g),l.shift(),l.length&&f(l[0][0],l[0][1])}}function ue(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=s[Symbol.asyncIterator],e;return n?n.call(s):(s=typeof Ze=="function"?Ze(s):s[Symbol.iterator](),e={},t("next"),t("throw"),t("return"),e[Symbol.asyncIterator]=function(){return this},e);function t(l){e[l]=s[l]&&function(a){return new Promise(function(u,f){a=s[l](a),r(u,f,a.done,a.value)})}}function r(l,a,u,f){Promise.resolve(f).then(function(c){l({value:c,done:u})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mt(s){var n;if(s.candidates==null||s.candidates.length===0)return!1;const e=(n=s.candidates[0])===null||n===void 0?void 0:n.content;return e===void 0?!1:Cn(e)}function Cn(s){if(s.parts===void 0||s.parts.length===0)return!1;for(const n of s.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}function ht(s){if(s.length!==0){if(s[0].role!=="user")throw new Error("History must start with a user turn.");for(const n of s)if(n.role!=="user"&&n.role!=="model")throw new Error(`Role must be user or model, but got ${n.role}.`)}}function gt(s){if(s===void 0||s.length===0)return[];const n=[],e=s.length;let t=0,r=s[0];for(;t<e;)if(s[t].role==="user")r=s[t],t++;else{const l=[];let a=!0;for(;t<e&&s[t].role==="model";)l.push(s[t]),a&&!Cn(s[t])&&(a=!1),t++;a&&(n.push(r),n.push(...l))}return n}class yt{constructor(n,e){this.modelsModule=n,this.apiClient=e}create(n){return new Ct(this.apiClient,this.modelsModule,n.model,n.config,n.history)}}class Ct{constructor(n,e,t,r={},l=[]){this.apiClient=n,this.modelsModule=e,this.model=t,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),ht(l)}async sendMessage(n){var e;await this.sendPromise;const t=w(this.apiClient,n.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(t),config:(e=n.config)!==null&&e!==void 0?e:this.config});return this.sendPromise=(async()=>{var l,a;const f=(a=(l=(await r).candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content,c=f?[f]:[];this.recordHistory(t,c)})(),await this.sendPromise,r}async sendMessageStream(n){var e;await this.sendPromise;const t=w(this.apiClient,n.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(t),config:(e=n.config)!==null&&e!==void 0?e:this.config});this.sendPromise=r.then(()=>{});const l=await r;return this.processStreamResponse(l,t)}getHistory(n=!1){return n?gt(this.history):this.history}processStreamResponse(n,e){var t,r;return ne(this,arguments,function*(){var a,u,f,c;const d=[];try{for(var p=!0,m=ue(n),h;h=yield D(m.next()),a=h.done,!a;p=!0){c=h.value,p=!1;const g=c;if(mt(g)){const y=(r=(t=g.candidates)===null||t===void 0?void 0:t[0])===null||r===void 0?void 0:r.content;y!==void 0&&d.push(y)}yield yield D(g)}}catch(g){u={error:g}}finally{try{!p&&!a&&(f=m.return)&&(yield D(f.call(m)))}finally{if(u)throw u.error}}this.recordHistory(e,d)})}recordHistory(n,e){let t=[];e.length>0&&e.every(r=>r.role==="model")?t=e:t.push({role:"model",parts:[]}),this.history.push(n),this.history.push(...t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Tt(s,n,e){const t={},r=i(n,["pageSize"]);e!==void 0&&r!=null&&o(e,["_query","pageSize"],r);const l=i(n,["pageToken"]);return e!==void 0&&l!=null&&o(e,["_query","pageToken"],l),t}function Et(s,n){const e={},t=i(n,["config"]);return t!=null&&o(e,["config"],Tt(s,t,e)),e}function vt(s,n){const e={},t=i(n,["details"]);t!=null&&o(e,["details"],t);const r=i(n,["message"]);r!=null&&o(e,["message"],r);const l=i(n,["code"]);return l!=null&&o(e,["code"],l),e}function It(s,n){const e={},t=i(n,["name"]);t!=null&&o(e,["name"],t);const r=i(n,["displayName"]);r!=null&&o(e,["displayName"],r);const l=i(n,["mimeType"]);l!=null&&o(e,["mimeType"],l);const a=i(n,["sizeBytes"]);a!=null&&o(e,["sizeBytes"],a);const u=i(n,["createTime"]);u!=null&&o(e,["createTime"],u);const f=i(n,["expirationTime"]);f!=null&&o(e,["expirationTime"],f);const c=i(n,["updateTime"]);c!=null&&o(e,["updateTime"],c);const d=i(n,["sha256Hash"]);d!=null&&o(e,["sha256Hash"],d);const p=i(n,["uri"]);p!=null&&o(e,["uri"],p);const m=i(n,["downloadUri"]);m!=null&&o(e,["downloadUri"],m);const h=i(n,["state"]);h!=null&&o(e,["state"],h);const g=i(n,["source"]);g!=null&&o(e,["source"],g);const y=i(n,["videoMetadata"]);y!=null&&o(e,["videoMetadata"],y);const C=i(n,["error"]);return C!=null&&o(e,["error"],vt(s,C)),e}function _t(s,n){const e={},t=i(n,["file"]);t!=null&&o(e,["file"],It(s,t));const r=i(n,["config"]);return r!=null&&o(e,["config"],r),e}function At(s,n){const e={},t=i(n,["name"]);t!=null&&o(e,["_url","file"],gn(s,t));const r=i(n,["config"]);return r!=null&&o(e,["config"],r),e}function St(s,n){const e={},t=i(n,["name"]);t!=null&&o(e,["_url","file"],gn(s,t));const r=i(n,["config"]);return r!=null&&o(e,["config"],r),e}function Mt(s,n){const e={},t=i(n,["details"]);t!=null&&o(e,["details"],t);const r=i(n,["message"]);r!=null&&o(e,["message"],r);const l=i(n,["code"]);return l!=null&&o(e,["code"],l),e}function ae(s,n){const e={},t=i(n,["name"]);t!=null&&o(e,["name"],t);const r=i(n,["displayName"]);r!=null&&o(e,["displayName"],r);const l=i(n,["mimeType"]);l!=null&&o(e,["mimeType"],l);const a=i(n,["sizeBytes"]);a!=null&&o(e,["sizeBytes"],a);const u=i(n,["createTime"]);u!=null&&o(e,["createTime"],u);const f=i(n,["expirationTime"]);f!=null&&o(e,["expirationTime"],f);const c=i(n,["updateTime"]);c!=null&&o(e,["updateTime"],c);const d=i(n,["sha256Hash"]);d!=null&&o(e,["sha256Hash"],d);const p=i(n,["uri"]);p!=null&&o(e,["uri"],p);const m=i(n,["downloadUri"]);m!=null&&o(e,["downloadUri"],m);const h=i(n,["state"]);h!=null&&o(e,["state"],h);const g=i(n,["source"]);g!=null&&o(e,["source"],g);const y=i(n,["videoMetadata"]);y!=null&&o(e,["videoMetadata"],y);const C=i(n,["error"]);return C!=null&&o(e,["error"],Mt(s,C)),e}function Rt(s,n){const e={},t=i(n,["nextPageToken"]);t!=null&&o(e,["nextPageToken"],t);const r=i(n,["files"]);return r!=null&&(Array.isArray(r)?o(e,["files"],r.map(l=>ae(s,l))):o(e,["files"],r)),e}function Pt(){return{}}function xt(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dt extends te{constructor(n){super(),this.apiClient=n,this.list=async(e={})=>new yn(j.PAGED_ITEM_FILES,t=>this.listInternal(t),await this.listInternal(e),e)}async upload(n){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(n.file,n.config).then(e=>ae(this.apiClient,e))}async listInternal(n){var e;let t,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Et(this.apiClient,n);return r=_("files",a._url),l=a._query,delete a.config,delete a._url,delete a._query,t=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(u=>u.json()),t.then(u=>{const f=Rt(this.apiClient,u),c=new ft;return Object.assign(c,f),c})}}async createInternal(n){var e;let t,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=_t(this.apiClient,n);return r=_("upload/v1beta/files",a._url),l=a._query,delete a.config,delete a._url,delete a._query,t=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(u=>u.json()),t.then(()=>{const u=Pt(),f=new ct;return Object.assign(f,u),f})}}async get(n){var e;let t,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=At(this.apiClient,n);return r=_("files/{file}",a._url),l=a._query,delete a.config,delete a._url,delete a._query,t=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(u=>u.json()),t.then(u=>ae(this.apiClient,u))}}async delete(n){var e;let t,r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=St(this.apiClient,n);return r=_("files/{file}",a._url),l=a._query,delete a.config,delete a._url,delete a._query,t=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(u=>u.json()),t.then(()=>{const u=xt(),f=new dt;return Object.assign(f,u),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wt(s,n){const e={};if(i(n,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const t=i(n,["thought"]);t!=null&&o(e,["thought"],t);const r=i(n,["codeExecutionResult"]);r!=null&&o(e,["codeExecutionResult"],r);const l=i(n,["executableCode"]);l!=null&&o(e,["executableCode"],l);const a=i(n,["fileData"]);a!=null&&o(e,["fileData"],a);const u=i(n,["functionCall"]);u!=null&&o(e,["functionCall"],u);const f=i(n,["functionResponse"]);f!=null&&o(e,["functionResponse"],f);const c=i(n,["inlineData"]);c!=null&&o(e,["inlineData"],c);const d=i(n,["text"]);return d!=null&&o(e,["text"],d),e}function Nt(s,n){const e={},t=i(n,["videoMetadata"]);t!=null&&o(e,["videoMetadata"],t);const r=i(n,["thought"]);r!=null&&o(e,["thought"],r);const l=i(n,["codeExecutionResult"]);l!=null&&o(e,["codeExecutionResult"],l);const a=i(n,["executableCode"]);a!=null&&o(e,["executableCode"],a);const u=i(n,["fileData"]);u!=null&&o(e,["fileData"],u);const f=i(n,["functionCall"]);f!=null&&o(e,["functionCall"],f);const c=i(n,["functionResponse"]);c!=null&&o(e,["functionResponse"],c);const d=i(n,["inlineData"]);d!=null&&o(e,["inlineData"],d);const p=i(n,["text"]);return p!=null&&o(e,["text"],p),e}function Vt(s,n){const e={},t=i(n,["parts"]);t!=null&&(Array.isArray(t)?o(e,["parts"],t.map(l=>wt(s,l))):o(e,["parts"],t));const r=i(n,["role"]);return r!=null&&o(e,["role"],r),e}function Ft(s,n){const e={},t=i(n,["parts"]);t!=null&&(Array.isArray(t)?o(e,["parts"],t.map(l=>Nt(s,l))):o(e,["parts"],t));const r=i(n,["role"]);return r!=null&&o(e,["role"],r),e}function Ut(s,n){const e={},t=i(n,["example"]);t!=null&&o(e,["example"],t);const r=i(n,["pattern"]);r!=null&&o(e,["pattern"],r);const l=i(n,["default"]);l!=null&&o(e,["default"],l);const a=i(n,["maxLength"]);a!=null&&o(e,["maxLength"],a);const u=i(n,["minLength"]);u!=null&&o(e,["minLength"],u);const f=i(n,["minProperties"]);f!=null&&o(e,["minProperties"],f);const c=i(n,["maxProperties"]);c!=null&&o(e,["maxProperties"],c);const d=i(n,["anyOf"]);d!=null&&o(e,["anyOf"],d);const p=i(n,["description"]);p!=null&&o(e,["description"],p);const m=i(n,["enum"]);m!=null&&o(e,["enum"],m);const h=i(n,["format"]);h!=null&&o(e,["format"],h);const g=i(n,["items"]);g!=null&&o(e,["items"],g);const y=i(n,["maxItems"]);y!=null&&o(e,["maxItems"],y);const C=i(n,["maximum"]);C!=null&&o(e,["maximum"],C);const T=i(n,["minItems"]);T!=null&&o(e,["minItems"],T);const E=i(n,["minimum"]);E!=null&&o(e,["minimum"],E);const I=i(n,["nullable"]);I!=null&&o(e,["nullable"],I);const v=i(n,["properties"]);v!=null&&o(e,["properties"],v);const A=i(n,["propertyOrdering"]);A!=null&&o(e,["propertyOrdering"],A);const M=i(n,["required"]);M!=null&&o(e,["required"],M);const R=i(n,["title"]);R!=null&&o(e,["title"],R);const P=i(n,["type"]);return P!=null&&o(e,["type"],P),e}function Lt(s,n){const e={};if(i(n,["response"])!==void 0)throw new Error("response parameter is not supported in Gemini API.");const t=i(n,["description"]);t!=null&&o(e,["description"],t);const r=i(n,["name"]);r!=null&&o(e,["name"],r);const l=i(n,["parameters"]);return l!=null&&o(e,["parameters"],l),e}function kt(s,n){const e={},t=i(n,["response"]);t!=null&&o(e,["response"],Ut(s,t));const r=i(n,["description"]);r!=null&&o(e,["description"],r);const l=i(n,["name"]);l!=null&&o(e,["name"],l);const a=i(n,["parameters"]);return a!=null&&o(e,["parameters"],a),e}function Gt(){return{}}function qt(){return{}}function Ht(s,n){const e={},t=i(n,["mode"]);t!=null&&o(e,["mode"],t);const r=i(n,["dynamicThreshold"]);return r!=null&&o(e,["dynamicThreshold"],r),e}function Bt(s,n){const e={},t=i(n,["mode"]);t!=null&&o(e,["mode"],t);const r=i(n,["dynamicThreshold"]);return r!=null&&o(e,["dynamicThreshold"],r),e}function Yt(s,n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&o(e,["dynamicRetrievalConfig"],Ht(s,t)),e}function $t(s,n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&o(e,["dynamicRetrievalConfig"],Bt(s,t)),e}function Kt(s,n){const e={},t=i(n,["functionDeclarations"]);if(t!=null&&(Array.isArray(t)?o(e,["functionDeclarations"],t.map(u=>Lt(s,u))):o(e,["functionDeclarations"],t)),i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");i(n,["googleSearch"])!=null&&o(e,["googleSearch"],Gt());const l=i(n,["googleSearchRetrieval"]);l!=null&&o(e,["googleSearchRetrieval"],Yt(s,l));const a=i(n,["codeExecution"]);return a!=null&&o(e,["codeExecution"],a),e}function Wt(s,n){const e={},t=i(n,["functionDeclarations"]);t!=null&&(Array.isArray(t)?o(e,["functionDeclarations"],t.map(f=>kt(s,f))):o(e,["functionDeclarations"],t));const r=i(n,["retrieval"]);r!=null&&o(e,["retrieval"],r),i(n,["googleSearch"])!=null&&o(e,["googleSearch"],qt());const a=i(n,["googleSearchRetrieval"]);a!=null&&o(e,["googleSearchRetrieval"],$t(s,a));const u=i(n,["codeExecution"]);return u!=null&&o(e,["codeExecution"],u),e}function Jt(s,n){const e={},t=i(n,["handle"]);if(t!=null&&o(e,["handle"],t),i(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function zt(s,n){const e={},t=i(n,["handle"]);t!=null&&o(e,["handle"],t);const r=i(n,["transparent"]);return r!=null&&o(e,["transparent"],r),e}function Xt(){return{}}function Oe(){return{}}function Qt(s,n){const e={},t=i(n,["disabled"]);t!=null&&o(e,["disabled"],t);const r=i(n,["startOfSpeechSensitivity"]);r!=null&&o(e,["startOfSpeechSensitivity"],r);const l=i(n,["endOfSpeechSensitivity"]);l!=null&&o(e,["endOfSpeechSensitivity"],l);const a=i(n,["prefixPaddingMs"]);a!=null&&o(e,["prefixPaddingMs"],a);const u=i(n,["silenceDurationMs"]);return u!=null&&o(e,["silenceDurationMs"],u),e}function Zt(s,n){const e={},t=i(n,["disabled"]);t!=null&&o(e,["disabled"],t);const r=i(n,["startOfSpeechSensitivity"]);r!=null&&o(e,["startOfSpeechSensitivity"],r);const l=i(n,["endOfSpeechSensitivity"]);l!=null&&o(e,["endOfSpeechSensitivity"],l);const a=i(n,["prefixPaddingMs"]);a!=null&&o(e,["prefixPaddingMs"],a);const u=i(n,["silenceDurationMs"]);return u!=null&&o(e,["silenceDurationMs"],u),e}function Ot(s,n){const e={},t=i(n,["automaticActivityDetection"]);t!=null&&o(e,["automaticActivityDetection"],Qt(s,t));const r=i(n,["activityHandling"]);r!=null&&o(e,["activityHandling"],r);const l=i(n,["turnCoverage"]);return l!=null&&o(e,["turnCoverage"],l),e}function bt(s,n){const e={},t=i(n,["automaticActivityDetection"]);t!=null&&o(e,["automaticActivityDetection"],Zt(s,t));const r=i(n,["activityHandling"]);r!=null&&o(e,["activityHandling"],r);const l=i(n,["turnCoverage"]);return l!=null&&o(e,["turnCoverage"],l),e}function jt(s,n){const e={},t=i(n,["targetTokens"]);return t!=null&&o(e,["targetTokens"],t),e}function eo(s,n){const e={},t=i(n,["targetTokens"]);return t!=null&&o(e,["targetTokens"],t),e}function no(s,n){const e={},t=i(n,["triggerTokens"]);t!=null&&o(e,["triggerTokens"],t);const r=i(n,["slidingWindow"]);return r!=null&&o(e,["slidingWindow"],jt(s,r)),e}function to(s,n){const e={},t=i(n,["triggerTokens"]);t!=null&&o(e,["triggerTokens"],t);const r=i(n,["slidingWindow"]);return r!=null&&o(e,["slidingWindow"],eo(s,r)),e}function oo(s,n,e){const t={},r=i(n,["generationConfig"]);e!==void 0&&r!=null&&o(e,["setup","generationConfig"],r);const l=i(n,["responseModalities"]);e!==void 0&&l!=null&&o(e,["setup","generationConfig","responseModalities"],l);const a=i(n,["temperature"]);e!==void 0&&a!=null&&o(e,["setup","generationConfig","temperature"],a);const u=i(n,["topP"]);e!==void 0&&u!=null&&o(e,["setup","generationConfig","topP"],u);const f=i(n,["topK"]);e!==void 0&&f!=null&&o(e,["setup","generationConfig","topK"],f);const c=i(n,["maxOutputTokens"]);e!==void 0&&c!=null&&o(e,["setup","generationConfig","maxOutputTokens"],c);const d=i(n,["mediaResolution"]);e!==void 0&&d!=null&&o(e,["setup","generationConfig","mediaResolution"],d);const p=i(n,["seed"]);e!==void 0&&p!=null&&o(e,["setup","generationConfig","seed"],p);const m=i(n,["speechConfig"]);e!==void 0&&m!=null&&o(e,["setup","generationConfig","speechConfig"],m);const h=i(n,["systemInstruction"]);e!==void 0&&h!=null&&o(e,["setup","systemInstruction"],Vt(s,w(s,h)));const g=i(n,["tools"]);e!==void 0&&g!=null&&(Array.isArray(g)?o(e,["setup","tools"],V(s,V(s,g).map(I=>Kt(s,oe(s,I))))):o(e,["setup","tools"],V(s,g)));const y=i(n,["sessionResumption"]);if(e!==void 0&&y!=null&&o(e,["setup","sessionResumption"],Jt(s,y)),i(n,["inputAudioTranscription"])!==void 0)throw new Error("inputAudioTranscription parameter is not supported in Gemini API.");const C=i(n,["outputAudioTranscription"]);e!==void 0&&C!=null&&o(e,["setup","outputAudioTranscription"],Xt());const T=i(n,["realtimeInputConfig"]);e!==void 0&&T!=null&&o(e,["setup","realtimeInputConfig"],Ot(s,T));const E=i(n,["contextWindowCompression"]);return e!==void 0&&E!=null&&o(e,["setup","contextWindowCompression"],no(s,E)),t}function io(s,n,e){const t={},r=i(n,["generationConfig"]);e!==void 0&&r!=null&&o(e,["setup","generationConfig"],r);const l=i(n,["responseModalities"]);e!==void 0&&l!=null&&o(e,["setup","generationConfig","responseModalities"],l);const a=i(n,["temperature"]);e!==void 0&&a!=null&&o(e,["setup","generationConfig","temperature"],a);const u=i(n,["topP"]);e!==void 0&&u!=null&&o(e,["setup","generationConfig","topP"],u);const f=i(n,["topK"]);e!==void 0&&f!=null&&o(e,["setup","generationConfig","topK"],f);const c=i(n,["maxOutputTokens"]);e!==void 0&&c!=null&&o(e,["setup","generationConfig","maxOutputTokens"],c);const d=i(n,["mediaResolution"]);e!==void 0&&d!=null&&o(e,["setup","generationConfig","mediaResolution"],d);const p=i(n,["seed"]);e!==void 0&&p!=null&&o(e,["setup","generationConfig","seed"],p);const m=i(n,["speechConfig"]);e!==void 0&&m!=null&&o(e,["setup","generationConfig","speechConfig"],m);const h=i(n,["systemInstruction"]);e!==void 0&&h!=null&&o(e,["setup","systemInstruction"],Ft(s,w(s,h)));const g=i(n,["tools"]);e!==void 0&&g!=null&&(Array.isArray(g)?o(e,["setup","tools"],V(s,V(s,g).map(v=>Wt(s,oe(s,v))))):o(e,["setup","tools"],V(s,g)));const y=i(n,["sessionResumption"]);e!==void 0&&y!=null&&o(e,["setup","sessionResumption"],zt(s,y));const C=i(n,["inputAudioTranscription"]);e!==void 0&&C!=null&&o(e,["setup","inputAudioTranscription"],Oe());const T=i(n,["outputAudioTranscription"]);e!==void 0&&T!=null&&o(e,["setup","outputAudioTranscription"],Oe());const E=i(n,["realtimeInputConfig"]);e!==void 0&&E!=null&&o(e,["setup","realtimeInputConfig"],bt(s,E));const I=i(n,["contextWindowCompression"]);return e!==void 0&&I!=null&&o(e,["setup","contextWindowCompression"],to(s,I)),t}function so(s,n){const e={},t=i(n,["model"]);t!=null&&o(e,["setup","model"],x(s,t));const r=i(n,["config"]);return r!=null&&o(e,["config"],oo(s,r,e)),e}function ro(s,n){const e={},t=i(n,["model"]);t!=null&&o(e,["setup","model"],x(s,t));const r=i(n,["config"]);return r!=null&&o(e,["config"],io(s,r,e)),e}function lo(){return{}}function uo(){return{}}function ao(s,n){const e={},t=i(n,["thought"]);t!=null&&o(e,["thought"],t);const r=i(n,["codeExecutionResult"]);r!=null&&o(e,["codeExecutionResult"],r);const l=i(n,["executableCode"]);l!=null&&o(e,["executableCode"],l);const a=i(n,["fileData"]);a!=null&&o(e,["fileData"],a);const u=i(n,["functionCall"]);u!=null&&o(e,["functionCall"],u);const f=i(n,["functionResponse"]);f!=null&&o(e,["functionResponse"],f);const c=i(n,["inlineData"]);c!=null&&o(e,["inlineData"],c);const d=i(n,["text"]);return d!=null&&o(e,["text"],d),e}function fo(s,n){const e={},t=i(n,["videoMetadata"]);t!=null&&o(e,["videoMetadata"],t);const r=i(n,["thought"]);r!=null&&o(e,["thought"],r);const l=i(n,["codeExecutionResult"]);l!=null&&o(e,["codeExecutionResult"],l);const a=i(n,["executableCode"]);a!=null&&o(e,["executableCode"],a);const u=i(n,["fileData"]);u!=null&&o(e,["fileData"],u);const f=i(n,["functionCall"]);f!=null&&o(e,["functionCall"],f);const c=i(n,["functionResponse"]);c!=null&&o(e,["functionResponse"],c);const d=i(n,["inlineData"]);d!=null&&o(e,["inlineData"],d);const p=i(n,["text"]);return p!=null&&o(e,["text"],p),e}function co(s,n){const e={},t=i(n,["parts"]);t!=null&&(Array.isArray(t)?o(e,["parts"],t.map(l=>ao(s,l))):o(e,["parts"],t));const r=i(n,["role"]);return r!=null&&o(e,["role"],r),e}function po(s,n){const e={},t=i(n,["parts"]);t!=null&&(Array.isArray(t)?o(e,["parts"],t.map(l=>fo(s,l))):o(e,["parts"],t));const r=i(n,["role"]);return r!=null&&o(e,["role"],r),e}function be(s,n){const e={},t=i(n,["text"]);t!=null&&o(e,["text"],t);const r=i(n,["finished"]);return r!=null&&o(e,["finished"],r),e}function je(s,n){const e={},t=i(n,["text"]);t!=null&&o(e,["text"],t);const r=i(n,["finished"]);return r!=null&&o(e,["finished"],r),e}function mo(s,n){const e={},t=i(n,["modelTurn"]);t!=null&&o(e,["modelTurn"],co(s,t));const r=i(n,["turnComplete"]);r!=null&&o(e,["turnComplete"],r);const l=i(n,["interrupted"]);l!=null&&o(e,["interrupted"],l);const a=i(n,["generationComplete"]);a!=null&&o(e,["generationComplete"],a);const u=i(n,["inputTranscription"]);u!=null&&o(e,["inputTranscription"],be(s,u));const f=i(n,["outputTranscription"]);return f!=null&&o(e,["outputTranscription"],be(s,f)),e}function ho(s,n){const e={},t=i(n,["modelTurn"]);t!=null&&o(e,["modelTurn"],po(s,t));const r=i(n,["turnComplete"]);r!=null&&o(e,["turnComplete"],r);const l=i(n,["interrupted"]);l!=null&&o(e,["interrupted"],l);const a=i(n,["generationComplete"]);a!=null&&o(e,["generationComplete"],a);const u=i(n,["inputTranscription"]);u!=null&&o(e,["inputTranscription"],je(s,u));const f=i(n,["outputTranscription"]);return f!=null&&o(e,["outputTranscription"],je(s,f)),e}function go(s,n){const e={},t=i(n,["id"]);t!=null&&o(e,["id"],t);const r=i(n,["args"]);r!=null&&o(e,["args"],r);const l=i(n,["name"]);return l!=null&&o(e,["name"],l),e}function yo(s,n){const e={},t=i(n,["args"]);t!=null&&o(e,["args"],t);const r=i(n,["name"]);return r!=null&&o(e,["name"],r),e}function Co(s,n){const e={},t=i(n,["functionCalls"]);return t!=null&&(Array.isArray(t)?o(e,["functionCalls"],t.map(r=>go(s,r))):o(e,["functionCalls"],t)),e}function To(s,n){const e={},t=i(n,["functionCalls"]);return t!=null&&(Array.isArray(t)?o(e,["functionCalls"],t.map(r=>yo(s,r))):o(e,["functionCalls"],t)),e}function Eo(s,n){const e={},t=i(n,["ids"]);return t!=null&&o(e,["ids"],t),e}function vo(s,n){const e={},t=i(n,["ids"]);return t!=null&&o(e,["ids"],t),e}function X(s,n){const e={},t=i(n,["modality"]);t!=null&&o(e,["modality"],t);const r=i(n,["tokenCount"]);return r!=null&&o(e,["tokenCount"],r),e}function Q(s,n){const e={},t=i(n,["modality"]);t!=null&&o(e,["modality"],t);const r=i(n,["tokenCount"]);return r!=null&&o(e,["tokenCount"],r),e}function Io(s,n){const e={},t=i(n,["promptTokenCount"]);t!=null&&o(e,["promptTokenCount"],t);const r=i(n,["cachedContentTokenCount"]);r!=null&&o(e,["cachedContentTokenCount"],r);const l=i(n,["responseTokenCount"]);l!=null&&o(e,["responseTokenCount"],l);const a=i(n,["toolUsePromptTokenCount"]);a!=null&&o(e,["toolUsePromptTokenCount"],a);const u=i(n,["thoughtsTokenCount"]);u!=null&&o(e,["thoughtsTokenCount"],u);const f=i(n,["totalTokenCount"]);f!=null&&o(e,["totalTokenCount"],f);const c=i(n,["promptTokensDetails"]);c!=null&&(Array.isArray(c)?o(e,["promptTokensDetails"],c.map(h=>X(s,h))):o(e,["promptTokensDetails"],c));const d=i(n,["cacheTokensDetails"]);d!=null&&(Array.isArray(d)?o(e,["cacheTokensDetails"],d.map(h=>X(s,h))):o(e,["cacheTokensDetails"],d));const p=i(n,["responseTokensDetails"]);p!=null&&(Array.isArray(p)?o(e,["responseTokensDetails"],p.map(h=>X(s,h))):o(e,["responseTokensDetails"],p));const m=i(n,["toolUsePromptTokensDetails"]);return m!=null&&(Array.isArray(m)?o(e,["toolUsePromptTokensDetails"],m.map(h=>X(s,h))):o(e,["toolUsePromptTokensDetails"],m)),e}function _o(s,n){const e={},t=i(n,["promptTokenCount"]);t!=null&&o(e,["promptTokenCount"],t);const r=i(n,["cachedContentTokenCount"]);r!=null&&o(e,["cachedContentTokenCount"],r);const l=i(n,["candidatesTokenCount"]);l!=null&&o(e,["responseTokenCount"],l);const a=i(n,["toolUsePromptTokenCount"]);a!=null&&o(e,["toolUsePromptTokenCount"],a);const u=i(n,["thoughtsTokenCount"]);u!=null&&o(e,["thoughtsTokenCount"],u);const f=i(n,["totalTokenCount"]);f!=null&&o(e,["totalTokenCount"],f);const c=i(n,["promptTokensDetails"]);c!=null&&(Array.isArray(c)?o(e,["promptTokensDetails"],c.map(g=>Q(s,g))):o(e,["promptTokensDetails"],c));const d=i(n,["cacheTokensDetails"]);d!=null&&(Array.isArray(d)?o(e,["cacheTokensDetails"],d.map(g=>Q(s,g))):o(e,["cacheTokensDetails"],d));const p=i(n,["candidatesTokensDetails"]);p!=null&&(Array.isArray(p)?o(e,["responseTokensDetails"],p.map(g=>Q(s,g))):o(e,["responseTokensDetails"],p));const m=i(n,["toolUsePromptTokensDetails"]);m!=null&&(Array.isArray(m)?o(e,["toolUsePromptTokensDetails"],m.map(g=>Q(s,g))):o(e,["toolUsePromptTokensDetails"],m));const h=i(n,["trafficType"]);return h!=null&&o(e,["trafficType"],h),e}function Ao(s,n){const e={},t=i(n,["timeLeft"]);return t!=null&&o(e,["timeLeft"],t),e}function So(s,n){const e={},t=i(n,["timeLeft"]);return t!=null&&o(e,["timeLeft"],t),e}function Mo(s,n){const e={},t=i(n,["newHandle"]);t!=null&&o(e,["newHandle"],t);const r=i(n,["resumable"]);r!=null&&o(e,["resumable"],r);const l=i(n,["lastConsumedClientMessageIndex"]);return l!=null&&o(e,["lastConsumedClientMessageIndex"],l),e}function Ro(s,n){const e={},t=i(n,["newHandle"]);t!=null&&o(e,["newHandle"],t);const r=i(n,["resumable"]);r!=null&&o(e,["resumable"],r);const l=i(n,["lastConsumedClientMessageIndex"]);return l!=null&&o(e,["lastConsumedClientMessageIndex"],l),e}function Po(s,n){const e={};i(n,["setupComplete"])!=null&&o(e,["setupComplete"],lo());const r=i(n,["serverContent"]);r!=null&&o(e,["serverContent"],mo(s,r));const l=i(n,["toolCall"]);l!=null&&o(e,["toolCall"],Co(s,l));const a=i(n,["toolCallCancellation"]);a!=null&&o(e,["toolCallCancellation"],Eo(s,a));const u=i(n,["usageMetadata"]);u!=null&&o(e,["usageMetadata"],Io(s,u));const f=i(n,["goAway"]);f!=null&&o(e,["goAway"],Ao(s,f));const c=i(n,["sessionResumptionUpdate"]);return c!=null&&o(e,["sessionResumptionUpdate"],Mo(s,c)),e}function xo(s,n){const e={};i(n,["setupComplete"])!=null&&o(e,["setupComplete"],uo());const r=i(n,["serverContent"]);r!=null&&o(e,["serverContent"],ho(s,r));const l=i(n,["toolCall"]);l!=null&&o(e,["toolCall"],To(s,l));const a=i(n,["toolCallCancellation"]);a!=null&&o(e,["toolCallCancellation"],vo(s,a));const u=i(n,["usageMetadata"]);u!=null&&o(e,["usageMetadata"],_o(s,u));const f=i(n,["goAway"]);f!=null&&o(e,["goAway"],So(s,f));const c=i(n,["sessionResumptionUpdate"]);return c!=null&&o(e,["sessionResumptionUpdate"],Ro(s,c)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Do(s,n){const e={};if(i(n,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const t=i(n,["thought"]);t!=null&&o(e,["thought"],t);const r=i(n,["codeExecutionResult"]);r!=null&&o(e,["codeExecutionResult"],r);const l=i(n,["executableCode"]);l!=null&&o(e,["executableCode"],l);const a=i(n,["fileData"]);a!=null&&o(e,["fileData"],a);const u=i(n,["functionCall"]);u!=null&&o(e,["functionCall"],u);const f=i(n,["functionResponse"]);f!=null&&o(e,["functionResponse"],f);const c=i(n,["inlineData"]);c!=null&&o(e,["inlineData"],c);const d=i(n,["text"]);return d!=null&&o(e,["text"],d),e}function ie(s,n){const e={},t=i(n,["parts"]);t!=null&&(Array.isArray(t)?o(e,["parts"],t.map(l=>Do(s,l))):o(e,["parts"],t));const r=i(n,["role"]);return r!=null&&o(e,["role"],r),e}function wo(s,n){const e={};if(i(n,["example"])!==void 0)throw new Error("example parameter is not supported in Gemini API.");if(i(n,["pattern"])!==void 0)throw new Error("pattern parameter is not supported in Gemini API.");if(i(n,["default"])!==void 0)throw new Error("default parameter is not supported in Gemini API.");if(i(n,["maxLength"])!==void 0)throw new Error("maxLength parameter is not supported in Gemini API.");if(i(n,["minLength"])!==void 0)throw new Error("minLength parameter is not supported in Gemini API.");if(i(n,["minProperties"])!==void 0)throw new Error("minProperties parameter is not supported in Gemini API.");if(i(n,["maxProperties"])!==void 0)throw new Error("maxProperties parameter is not supported in Gemini API.");const t=i(n,["anyOf"]);t!=null&&o(e,["anyOf"],t);const r=i(n,["description"]);r!=null&&o(e,["description"],r);const l=i(n,["enum"]);l!=null&&o(e,["enum"],l);const a=i(n,["format"]);a!=null&&o(e,["format"],a);const u=i(n,["items"]);u!=null&&o(e,["items"],u);const f=i(n,["maxItems"]);f!=null&&o(e,["maxItems"],f);const c=i(n,["maximum"]);c!=null&&o(e,["maximum"],c);const d=i(n,["minItems"]);d!=null&&o(e,["minItems"],d);const p=i(n,["minimum"]);p!=null&&o(e,["minimum"],p);const m=i(n,["nullable"]);m!=null&&o(e,["nullable"],m);const h=i(n,["properties"]);h!=null&&o(e,["properties"],h);const g=i(n,["propertyOrdering"]);g!=null&&o(e,["propertyOrdering"],g);const y=i(n,["required"]);y!=null&&o(e,["required"],y);const C=i(n,["title"]);C!=null&&o(e,["title"],C);const T=i(n,["type"]);return T!=null&&o(e,["type"],T),e}function No(s,n){const e={};if(i(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=i(n,["category"]);t!=null&&o(e,["category"],t);const r=i(n,["threshold"]);return r!=null&&o(e,["threshold"],r),e}function Vo(s,n){const e={};if(i(n,["response"])!==void 0)throw new Error("response parameter is not supported in Gemini API.");const t=i(n,["description"]);t!=null&&o(e,["description"],t);const r=i(n,["name"]);r!=null&&o(e,["name"],r);const l=i(n,["parameters"]);return l!=null&&o(e,["parameters"],l),e}function Fo(){return{}}function Uo(s,n){const e={},t=i(n,["mode"]);t!=null&&o(e,["mode"],t);const r=i(n,["dynamicThreshold"]);return r!=null&&o(e,["dynamicThreshold"],r),e}function Lo(s,n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&o(e,["dynamicRetrievalConfig"],Uo(s,t)),e}function ko(s,n){const e={},t=i(n,["functionDeclarations"]);if(t!=null&&(Array.isArray(t)?o(e,["functionDeclarations"],t.map(u=>Vo(s,u))):o(e,["functionDeclarations"],t)),i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");i(n,["googleSearch"])!=null&&o(e,["googleSearch"],Fo());const l=i(n,["googleSearchRetrieval"]);l!=null&&o(e,["googleSearchRetrieval"],Lo(s,l));const a=i(n,["codeExecution"]);return a!=null&&o(e,["codeExecution"],a),e}function Go(s,n){const e={},t=i(n,["mode"]);t!=null&&o(e,["mode"],t);const r=i(n,["allowedFunctionNames"]);return r!=null&&o(e,["allowedFunctionNames"],r),e}function qo(s,n){const e={},t=i(n,["functionCallingConfig"]);return t!=null&&o(e,["functionCallingConfig"],Go(s,t)),e}function Ho(s,n){const e={},t=i(n,["voiceName"]);return t!=null&&o(e,["voiceName"],t),e}function Bo(s,n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&o(e,["prebuiltVoiceConfig"],Ho(s,t)),e}function Yo(s,n){const e={},t=i(n,["voiceConfig"]);t!=null&&o(e,["voiceConfig"],Bo(s,t));const r=i(n,["languageCode"]);return r!=null&&o(e,["languageCode"],r),e}function $o(s,n){const e={},t=i(n,["includeThoughts"]);t!=null&&o(e,["includeThoughts"],t);const r=i(n,["thinkingBudget"]);return r!=null&&o(e,["thinkingBudget"],r),e}function Ko(s,n,e){const t={},r=i(n,["systemInstruction"]);e!==void 0&&r!=null&&o(e,["systemInstruction"],ie(s,w(s,r)));const l=i(n,["temperature"]);l!=null&&o(t,["temperature"],l);const a=i(n,["topP"]);a!=null&&o(t,["topP"],a);const u=i(n,["topK"]);u!=null&&o(t,["topK"],u);const f=i(n,["candidateCount"]);f!=null&&o(t,["candidateCount"],f);const c=i(n,["maxOutputTokens"]);c!=null&&o(t,["maxOutputTokens"],c);const d=i(n,["stopSequences"]);d!=null&&o(t,["stopSequences"],d);const p=i(n,["responseLogprobs"]);p!=null&&o(t,["responseLogprobs"],p);const m=i(n,["logprobs"]);m!=null&&o(t,["logprobs"],m);const h=i(n,["presencePenalty"]);h!=null&&o(t,["presencePenalty"],h);const g=i(n,["frequencyPenalty"]);g!=null&&o(t,["frequencyPenalty"],g);const y=i(n,["seed"]);y!=null&&o(t,["seed"],y);const C=i(n,["responseMimeType"]);C!=null&&o(t,["responseMimeType"],C);const T=i(n,["responseSchema"]);if(T!=null&&o(t,["responseSchema"],wo(s,mn(s,T))),i(n,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(n,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const E=i(n,["safetySettings"]);e!==void 0&&E!=null&&(Array.isArray(E)?o(e,["safetySettings"],E.map(N=>No(s,N))):o(e,["safetySettings"],E));const I=i(n,["tools"]);e!==void 0&&I!=null&&(Array.isArray(I)?o(e,["tools"],V(s,V(s,I).map(N=>ko(s,oe(s,N))))):o(e,["tools"],V(s,I)));const v=i(n,["toolConfig"]);if(e!==void 0&&v!=null&&o(e,["toolConfig"],qo(s,v)),i(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=i(n,["cachedContent"]);e!==void 0&&A!=null&&o(e,["cachedContent"],G(s,A));const M=i(n,["responseModalities"]);M!=null&&o(t,["responseModalities"],M);const R=i(n,["mediaResolution"]);R!=null&&o(t,["mediaResolution"],R);const P=i(n,["speechConfig"]);if(P!=null&&o(t,["speechConfig"],Yo(s,hn(s,P))),i(n,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const F=i(n,["thinkingConfig"]);return F!=null&&o(t,["thinkingConfig"],$o(s,F)),t}function en(s,n){const e={},t=i(n,["model"]);t!=null&&o(e,["_url","model"],x(s,t));const r=i(n,["contents"]);r!=null&&(Array.isArray(r)?o(e,["contents"],S(s,S(s,r).map(a=>ie(s,a)))):o(e,["contents"],S(s,r)));const l=i(n,["config"]);return l!=null&&o(e,["generationConfig"],Ko(s,l,e)),e}function Wo(s,n,e){const t={},r=i(n,["taskType"]);e!==void 0&&r!=null&&o(e,["requests[]","taskType"],r);const l=i(n,["title"]);e!==void 0&&l!=null&&o(e,["requests[]","title"],l);const a=i(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&o(e,["requests[]","outputDimensionality"],a),i(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(i(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Jo(s,n){const e={},t=i(n,["model"]);t!=null&&o(e,["_url","model"],x(s,t));const r=i(n,["contents"]);r!=null&&o(e,["requests[]","content"],pn(s,r));const l=i(n,["config"]);l!=null&&o(e,["config"],Wo(s,l,e));const a=i(n,["model"]);return a!==void 0&&o(e,["requests[]","model"],x(s,a)),e}function zo(s,n,e){const t={};if(i(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=i(n,["numberOfImages"]);e!==void 0&&r!=null&&o(e,["parameters","sampleCount"],r);const l=i(n,["aspectRatio"]);e!==void 0&&l!=null&&o(e,["parameters","aspectRatio"],l);const a=i(n,["guidanceScale"]);if(e!==void 0&&a!=null&&o(e,["parameters","guidanceScale"],a),i(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=i(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&o(e,["parameters","safetySetting"],u);const f=i(n,["personGeneration"]);e!==void 0&&f!=null&&o(e,["parameters","personGeneration"],f);const c=i(n,["includeSafetyAttributes"]);e!==void 0&&c!=null&&o(e,["parameters","includeSafetyAttributes"],c);const d=i(n,["includeRaiReason"]);e!==void 0&&d!=null&&o(e,["parameters","includeRaiReason"],d);const p=i(n,["language"]);e!==void 0&&p!=null&&o(e,["parameters","language"],p);const m=i(n,["outputMimeType"]);e!==void 0&&m!=null&&o(e,["parameters","outputOptions","mimeType"],m);const h=i(n,["outputCompressionQuality"]);if(e!==void 0&&h!=null&&o(e,["parameters","outputOptions","compressionQuality"],h),i(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(i(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function Xo(s,n){const e={},t=i(n,["model"]);t!=null&&o(e,["_url","model"],x(s,t));const r=i(n,["prompt"]);r!=null&&o(e,["instances[0]","prompt"],r);const l=i(n,["config"]);return l!=null&&o(e,["config"],zo(s,l,e)),e}function Qo(s,n){const e={},t=i(n,["model"]);t!=null&&o(e,["_url","name"],x(s,t));const r=i(n,["config"]);return r!=null&&o(e,["config"],r),e}function Zo(s,n){const e={};if(i(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(i(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(i(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Oo(s,n){const e={},t=i(n,["model"]);t!=null&&o(e,["_url","model"],x(s,t));const r=i(n,["contents"]);r!=null&&(Array.isArray(r)?o(e,["contents"],S(s,S(s,r).map(a=>ie(s,a)))):o(e,["contents"],S(s,r)));const l=i(n,["config"]);return l!=null&&o(e,["config"],Zo(s,l)),e}function bo(s,n){const e={};if(i(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=i(n,["imageBytes"]);t!=null&&o(e,["bytesBase64Encoded"],q(s,t));const r=i(n,["mimeType"]);return r!=null&&o(e,["mimeType"],r),e}function jo(s,n,e){const t={},r=i(n,["numberOfVideos"]);if(e!==void 0&&r!=null&&o(e,["parameters","sampleCount"],r),i(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=i(n,["durationSeconds"]);if(e!==void 0&&l!=null&&o(e,["parameters","durationSeconds"],l),i(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=i(n,["aspectRatio"]);if(e!==void 0&&a!=null&&o(e,["parameters","aspectRatio"],a),i(n,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const u=i(n,["personGeneration"]);if(e!==void 0&&u!=null&&o(e,["parameters","personGeneration"],u),i(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=i(n,["negativePrompt"]);if(e!==void 0&&f!=null&&o(e,["parameters","negativePrompt"],f),i(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function ei(s,n){const e={},t=i(n,["model"]);t!=null&&o(e,["_url","model"],x(s,t));const r=i(n,["prompt"]);r!=null&&o(e,["instances[0]","prompt"],r);const l=i(n,["image"]);l!=null&&o(e,["instances[0]","image"],bo(s,l));const a=i(n,["config"]);return a!=null&&o(e,["config"],jo(s,a,e)),e}function ni(s,n){const e={},t=i(n,["videoMetadata"]);t!=null&&o(e,["videoMetadata"],t);const r=i(n,["thought"]);r!=null&&o(e,["thought"],r);const l=i(n,["codeExecutionResult"]);l!=null&&o(e,["codeExecutionResult"],l);const a=i(n,["executableCode"]);a!=null&&o(e,["executableCode"],a);const u=i(n,["fileData"]);u!=null&&o(e,["fileData"],u);const f=i(n,["functionCall"]);f!=null&&o(e,["functionCall"],f);const c=i(n,["functionResponse"]);c!=null&&o(e,["functionResponse"],c);const d=i(n,["inlineData"]);d!=null&&o(e,["inlineData"],d);const p=i(n,["text"]);return p!=null&&o(e,["text"],p),e}function $(s,n){const e={},t=i(n,["parts"]);t!=null&&(Array.isArray(t)?o(e,["parts"],t.map(l=>ni(s,l))):o(e,["parts"],t));const r=i(n,["role"]);return r!=null&&o(e,["role"],r),e}function Tn(s,n){const e={},t=i(n,["example"]);t!=null&&o(e,["example"],t);const r=i(n,["pattern"]);r!=null&&o(e,["pattern"],r);const l=i(n,["default"]);l!=null&&o(e,["default"],l);const a=i(n,["maxLength"]);a!=null&&o(e,["maxLength"],a);const u=i(n,["minLength"]);u!=null&&o(e,["minLength"],u);const f=i(n,["minProperties"]);f!=null&&o(e,["minProperties"],f);const c=i(n,["maxProperties"]);c!=null&&o(e,["maxProperties"],c);const d=i(n,["anyOf"]);d!=null&&o(e,["anyOf"],d);const p=i(n,["description"]);p!=null&&o(e,["description"],p);const m=i(n,["enum"]);m!=null&&o(e,["enum"],m);const h=i(n,["format"]);h!=null&&o(e,["format"],h);const g=i(n,["items"]);g!=null&&o(e,["items"],g);const y=i(n,["maxItems"]);y!=null&&o(e,["maxItems"],y);const C=i(n,["maximum"]);C!=null&&o(e,["maximum"],C);const T=i(n,["minItems"]);T!=null&&o(e,["minItems"],T);const E=i(n,["minimum"]);E!=null&&o(e,["minimum"],E);const I=i(n,["nullable"]);I!=null&&o(e,["nullable"],I);const v=i(n,["properties"]);v!=null&&o(e,["properties"],v);const A=i(n,["propertyOrdering"]);A!=null&&o(e,["propertyOrdering"],A);const M=i(n,["required"]);M!=null&&o(e,["required"],M);const R=i(n,["title"]);R!=null&&o(e,["title"],R);const P=i(n,["type"]);return P!=null&&o(e,["type"],P),e}function ti(s,n){const e={},t=i(n,["featureSelectionPreference"]);return t!=null&&o(e,["featureSelectionPreference"],t),e}function oi(s,n){const e={},t=i(n,["method"]);t!=null&&o(e,["method"],t);const r=i(n,["category"]);r!=null&&o(e,["category"],r);const l=i(n,["threshold"]);return l!=null&&o(e,["threshold"],l),e}function ii(s,n){const e={},t=i(n,["response"]);t!=null&&o(e,["response"],Tn(s,t));const r=i(n,["description"]);r!=null&&o(e,["description"],r);const l=i(n,["name"]);l!=null&&o(e,["name"],l);const a=i(n,["parameters"]);return a!=null&&o(e,["parameters"],a),e}function si(){return{}}function ri(s,n){const e={},t=i(n,["mode"]);t!=null&&o(e,["mode"],t);const r=i(n,["dynamicThreshold"]);return r!=null&&o(e,["dynamicThreshold"],r),e}function li(s,n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&o(e,["dynamicRetrievalConfig"],ri(s,t)),e}function En(s,n){const e={},t=i(n,["functionDeclarations"]);t!=null&&(Array.isArray(t)?o(e,["functionDeclarations"],t.map(f=>ii(s,f))):o(e,["functionDeclarations"],t));const r=i(n,["retrieval"]);r!=null&&o(e,["retrieval"],r),i(n,["googleSearch"])!=null&&o(e,["googleSearch"],si());const a=i(n,["googleSearchRetrieval"]);a!=null&&o(e,["googleSearchRetrieval"],li(s,a));const u=i(n,["codeExecution"]);return u!=null&&o(e,["codeExecution"],u),e}function ui(s,n){const e={},t=i(n,["mode"]);t!=null&&o(e,["mode"],t);const r=i(n,["allowedFunctionNames"]);return r!=null&&o(e,["allowedFunctionNames"],r),e}function ai(s,n){const e={},t=i(n,["functionCallingConfig"]);return t!=null&&o(e,["functionCallingConfig"],ui(s,t)),e}function fi(s,n){const e={},t=i(n,["voiceName"]);return t!=null&&o(e,["voiceName"],t),e}function ci(s,n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&o(e,["prebuiltVoiceConfig"],fi(s,t)),e}function di(s,n){const e={},t=i(n,["voiceConfig"]);t!=null&&o(e,["voiceConfig"],ci(s,t));const r=i(n,["languageCode"]);return r!=null&&o(e,["languageCode"],r),e}function pi(s,n){const e={},t=i(n,["includeThoughts"]);t!=null&&o(e,["includeThoughts"],t);const r=i(n,["thinkingBudget"]);return r!=null&&o(e,["thinkingBudget"],r),e}function mi(s,n,e){const t={},r=i(n,["systemInstruction"]);e!==void 0&&r!=null&&o(e,["systemInstruction"],$(s,w(s,r)));const l=i(n,["temperature"]);l!=null&&o(t,["temperature"],l);const a=i(n,["topP"]);a!=null&&o(t,["topP"],a);const u=i(n,["topK"]);u!=null&&o(t,["topK"],u);const f=i(n,["candidateCount"]);f!=null&&o(t,["candidateCount"],f);const c=i(n,["maxOutputTokens"]);c!=null&&o(t,["maxOutputTokens"],c);const d=i(n,["stopSequences"]);d!=null&&o(t,["stopSequences"],d);const p=i(n,["responseLogprobs"]);p!=null&&o(t,["responseLogprobs"],p);const m=i(n,["logprobs"]);m!=null&&o(t,["logprobs"],m);const h=i(n,["presencePenalty"]);h!=null&&o(t,["presencePenalty"],h);const g=i(n,["frequencyPenalty"]);g!=null&&o(t,["frequencyPenalty"],g);const y=i(n,["seed"]);y!=null&&o(t,["seed"],y);const C=i(n,["responseMimeType"]);C!=null&&o(t,["responseMimeType"],C);const T=i(n,["responseSchema"]);T!=null&&o(t,["responseSchema"],Tn(s,mn(s,T)));const E=i(n,["routingConfig"]);E!=null&&o(t,["routingConfig"],E);const I=i(n,["modelSelectionConfig"]);I!=null&&o(t,["modelConfig"],ti(s,I));const v=i(n,["safetySettings"]);e!==void 0&&v!=null&&(Array.isArray(v)?o(e,["safetySettings"],v.map(U=>oi(s,U))):o(e,["safetySettings"],v));const A=i(n,["tools"]);e!==void 0&&A!=null&&(Array.isArray(A)?o(e,["tools"],V(s,V(s,A).map(U=>En(s,oe(s,U))))):o(e,["tools"],V(s,A)));const M=i(n,["toolConfig"]);e!==void 0&&M!=null&&o(e,["toolConfig"],ai(s,M));const R=i(n,["labels"]);e!==void 0&&R!=null&&o(e,["labels"],R);const P=i(n,["cachedContent"]);e!==void 0&&P!=null&&o(e,["cachedContent"],G(s,P));const F=i(n,["responseModalities"]);F!=null&&o(t,["responseModalities"],F);const N=i(n,["mediaResolution"]);N!=null&&o(t,["mediaResolution"],N);const H=i(n,["speechConfig"]);H!=null&&o(t,["speechConfig"],di(s,hn(s,H)));const L=i(n,["audioTimestamp"]);L!=null&&o(t,["audioTimestamp"],L);const k=i(n,["thinkingConfig"]);return k!=null&&o(t,["thinkingConfig"],pi(s,k)),t}function nn(s,n){const e={},t=i(n,["model"]);t!=null&&o(e,["_url","model"],x(s,t));const r=i(n,["contents"]);r!=null&&(Array.isArray(r)?o(e,["contents"],S(s,S(s,r).map(a=>$(s,a)))):o(e,["contents"],S(s,r)));const l=i(n,["config"]);return l!=null&&o(e,["generationConfig"],mi(s,l,e)),e}function hi(s,n,e){const t={},r=i(n,["taskType"]);e!==void 0&&r!=null&&o(e,["instances[]","task_type"],r);const l=i(n,["title"]);e!==void 0&&l!=null&&o(e,["instances[]","title"],l);const a=i(n,["outputDimensionality"]);e!==void 0&&a!=null&&o(e,["parameters","outputDimensionality"],a);const u=i(n,["mimeType"]);e!==void 0&&u!=null&&o(e,["instances[]","mimeType"],u);const f=i(n,["autoTruncate"]);return e!==void 0&&f!=null&&o(e,["parameters","autoTruncate"],f),t}function gi(s,n){const e={},t=i(n,["model"]);t!=null&&o(e,["_url","model"],x(s,t));const r=i(n,["contents"]);r!=null&&o(e,["instances[]","content"],pn(s,r));const l=i(n,["config"]);return l!=null&&o(e,["config"],hi(s,l,e)),e}function yi(s,n,e){const t={},r=i(n,["outputGcsUri"]);e!==void 0&&r!=null&&o(e,["parameters","storageUri"],r);const l=i(n,["negativePrompt"]);e!==void 0&&l!=null&&o(e,["parameters","negativePrompt"],l);const a=i(n,["numberOfImages"]);e!==void 0&&a!=null&&o(e,["parameters","sampleCount"],a);const u=i(n,["aspectRatio"]);e!==void 0&&u!=null&&o(e,["parameters","aspectRatio"],u);const f=i(n,["guidanceScale"]);e!==void 0&&f!=null&&o(e,["parameters","guidanceScale"],f);const c=i(n,["seed"]);e!==void 0&&c!=null&&o(e,["parameters","seed"],c);const d=i(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&o(e,["parameters","safetySetting"],d);const p=i(n,["personGeneration"]);e!==void 0&&p!=null&&o(e,["parameters","personGeneration"],p);const m=i(n,["includeSafetyAttributes"]);e!==void 0&&m!=null&&o(e,["parameters","includeSafetyAttributes"],m);const h=i(n,["includeRaiReason"]);e!==void 0&&h!=null&&o(e,["parameters","includeRaiReason"],h);const g=i(n,["language"]);e!==void 0&&g!=null&&o(e,["parameters","language"],g);const y=i(n,["outputMimeType"]);e!==void 0&&y!=null&&o(e,["parameters","outputOptions","mimeType"],y);const C=i(n,["outputCompressionQuality"]);e!==void 0&&C!=null&&o(e,["parameters","outputOptions","compressionQuality"],C);const T=i(n,["addWatermark"]);e!==void 0&&T!=null&&o(e,["parameters","addWatermark"],T);const E=i(n,["enhancePrompt"]);return e!==void 0&&E!=null&&o(e,["parameters","enhancePrompt"],E),t}function Ci(s,n){const e={},t=i(n,["model"]);t!=null&&o(e,["_url","model"],x(s,t));const r=i(n,["prompt"]);r!=null&&o(e,["instances[0]","prompt"],r);const l=i(n,["config"]);return l!=null&&o(e,["config"],yi(s,l,e)),e}function Ti(s,n){const e={},t=i(n,["model"]);t!=null&&o(e,["_url","name"],x(s,t));const r=i(n,["config"]);return r!=null&&o(e,["config"],r),e}function Ei(s,n,e){const t={},r=i(n,["systemInstruction"]);e!==void 0&&r!=null&&o(e,["systemInstruction"],$(s,w(s,r)));const l=i(n,["tools"]);e!==void 0&&l!=null&&(Array.isArray(l)?o(e,["tools"],l.map(u=>En(s,u))):o(e,["tools"],l));const a=i(n,["generationConfig"]);return e!==void 0&&a!=null&&o(e,["generationConfig"],a),t}function vi(s,n){const e={},t=i(n,["model"]);t!=null&&o(e,["_url","model"],x(s,t));const r=i(n,["contents"]);r!=null&&(Array.isArray(r)?o(e,["contents"],S(s,S(s,r).map(a=>$(s,a)))):o(e,["contents"],S(s,r)));const l=i(n,["config"]);return l!=null&&o(e,["config"],Ei(s,l,e)),e}function Ii(s,n){const e={},t=i(n,["model"]);t!=null&&o(e,["_url","model"],x(s,t));const r=i(n,["contents"]);r!=null&&(Array.isArray(r)?o(e,["contents"],S(s,S(s,r).map(a=>$(s,a)))):o(e,["contents"],S(s,r)));const l=i(n,["config"]);return l!=null&&o(e,["config"],l),e}function _i(s,n){const e={},t=i(n,["gcsUri"]);t!=null&&o(e,["gcsUri"],t);const r=i(n,["imageBytes"]);r!=null&&o(e,["bytesBase64Encoded"],q(s,r));const l=i(n,["mimeType"]);return l!=null&&o(e,["mimeType"],l),e}function Ai(s,n,e){const t={},r=i(n,["numberOfVideos"]);e!==void 0&&r!=null&&o(e,["parameters","sampleCount"],r);const l=i(n,["outputGcsUri"]);e!==void 0&&l!=null&&o(e,["parameters","storageUri"],l);const a=i(n,["fps"]);e!==void 0&&a!=null&&o(e,["parameters","fps"],a);const u=i(n,["durationSeconds"]);e!==void 0&&u!=null&&o(e,["parameters","durationSeconds"],u);const f=i(n,["seed"]);e!==void 0&&f!=null&&o(e,["parameters","seed"],f);const c=i(n,["aspectRatio"]);e!==void 0&&c!=null&&o(e,["parameters","aspectRatio"],c);const d=i(n,["resolution"]);e!==void 0&&d!=null&&o(e,["parameters","resolution"],d);const p=i(n,["personGeneration"]);e!==void 0&&p!=null&&o(e,["parameters","personGeneration"],p);const m=i(n,["pubsubTopic"]);e!==void 0&&m!=null&&o(e,["parameters","pubsubTopic"],m);const h=i(n,["negativePrompt"]);e!==void 0&&h!=null&&o(e,["parameters","negativePrompt"],h);const g=i(n,["enhancePrompt"]);return e!==void 0&&g!=null&&o(e,["parameters","enhancePrompt"],g),t}function Si(s,n){const e={},t=i(n,["model"]);t!=null&&o(e,["_url","model"],x(s,t));const r=i(n,["prompt"]);r!=null&&o(e,["instances[0]","prompt"],r);const l=i(n,["image"]);l!=null&&o(e,["instances[0]","image"],_i(s,l));const a=i(n,["config"]);return a!=null&&o(e,["config"],Ai(s,a,e)),e}function Mi(s,n){const e={},t=i(n,["thought"]);t!=null&&o(e,["thought"],t);const r=i(n,["codeExecutionResult"]);r!=null&&o(e,["codeExecutionResult"],r);const l=i(n,["executableCode"]);l!=null&&o(e,["executableCode"],l);const a=i(n,["fileData"]);a!=null&&o(e,["fileData"],a);const u=i(n,["functionCall"]);u!=null&&o(e,["functionCall"],u);const f=i(n,["functionResponse"]);f!=null&&o(e,["functionResponse"],f);const c=i(n,["inlineData"]);c!=null&&o(e,["inlineData"],c);const d=i(n,["text"]);return d!=null&&o(e,["text"],d),e}function Ri(s,n){const e={},t=i(n,["parts"]);t!=null&&(Array.isArray(t)?o(e,["parts"],t.map(l=>Mi(s,l))):o(e,["parts"],t));const r=i(n,["role"]);return r!=null&&o(e,["role"],r),e}function Pi(s,n){const e={},t=i(n,["citationSources"]);return t!=null&&o(e,["citations"],t),e}function xi(s,n){const e={},t=i(n,["content"]);t!=null&&o(e,["content"],Ri(s,t));const r=i(n,["citationMetadata"]);r!=null&&o(e,["citationMetadata"],Pi(s,r));const l=i(n,["tokenCount"]);l!=null&&o(e,["tokenCount"],l);const a=i(n,["finishReason"]);a!=null&&o(e,["finishReason"],a);const u=i(n,["avgLogprobs"]);u!=null&&o(e,["avgLogprobs"],u);const f=i(n,["groundingMetadata"]);f!=null&&o(e,["groundingMetadata"],f);const c=i(n,["index"]);c!=null&&o(e,["index"],c);const d=i(n,["logprobsResult"]);d!=null&&o(e,["logprobsResult"],d);const p=i(n,["safetyRatings"]);return p!=null&&o(e,["safetyRatings"],p),e}function tn(s,n){const e={},t=i(n,["candidates"]);t!=null&&(Array.isArray(t)?o(e,["candidates"],t.map(u=>xi(s,u))):o(e,["candidates"],t));const r=i(n,["modelVersion"]);r!=null&&o(e,["modelVersion"],r);const l=i(n,["promptFeedback"]);l!=null&&o(e,["promptFeedback"],l);const a=i(n,["usageMetadata"]);return a!=null&&o(e,["usageMetadata"],a),e}function Di(s,n){const e={},t=i(n,["values"]);return t!=null&&o(e,["values"],t),e}function wi(){return{}}function Ni(s,n){const e={},t=i(n,["embeddings"]);return t!=null&&(Array.isArray(t)?o(e,["embeddings"],t.map(l=>Di(s,l))):o(e,["embeddings"],t)),i(n,["metadata"])!=null&&o(e,["metadata"],wi()),e}function Vi(s,n){const e={},t=i(n,["bytesBase64Encoded"]);t!=null&&o(e,["imageBytes"],q(s,t));const r=i(n,["mimeType"]);return r!=null&&o(e,["mimeType"],r),e}function vn(s,n){const e={},t=i(n,["safetyAttributes","categories"]);t!=null&&o(e,["categories"],t);const r=i(n,["safetyAttributes","scores"]);r!=null&&o(e,["scores"],r);const l=i(n,["contentType"]);return l!=null&&o(e,["contentType"],l),e}function Fi(s,n){const e={},t=i(n,["_self"]);t!=null&&o(e,["image"],Vi(s,t));const r=i(n,["raiFilteredReason"]);r!=null&&o(e,["raiFilteredReason"],r);const l=i(n,["_self"]);return l!=null&&o(e,["safetyAttributes"],vn(s,l)),e}function Ui(s,n){const e={},t=i(n,["predictions"]);t!=null&&(Array.isArray(t)?o(e,["generatedImages"],t.map(l=>Fi(s,l))):o(e,["generatedImages"],t));const r=i(n,["positivePromptSafetyAttributes"]);return r!=null&&o(e,["positivePromptSafetyAttributes"],vn(s,r)),e}function Li(s,n){const e={},t=i(n,["baseModel"]);t!=null&&o(e,["baseModel"],t);const r=i(n,["createTime"]);r!=null&&o(e,["createTime"],r);const l=i(n,["updateTime"]);return l!=null&&o(e,["updateTime"],l),e}function ki(s,n){const e={},t=i(n,["name"]);t!=null&&o(e,["name"],t);const r=i(n,["displayName"]);r!=null&&o(e,["displayName"],r);const l=i(n,["description"]);l!=null&&o(e,["description"],l);const a=i(n,["version"]);a!=null&&o(e,["version"],a);const u=i(n,["_self"]);u!=null&&o(e,["tunedModelInfo"],Li(s,u));const f=i(n,["inputTokenLimit"]);f!=null&&o(e,["inputTokenLimit"],f);const c=i(n,["outputTokenLimit"]);c!=null&&o(e,["outputTokenLimit"],c);const d=i(n,["supportedGenerationMethods"]);return d!=null&&o(e,["supportedActions"],d),e}function Gi(s,n){const e={},t=i(n,["totalTokens"]);t!=null&&o(e,["totalTokens"],t);const r=i(n,["cachedContentTokenCount"]);return r!=null&&o(e,["cachedContentTokenCount"],r),e}function qi(s,n){const e={},t=i(n,["video","uri"]);t!=null&&o(e,["uri"],t);const r=i(n,["video","encodedVideo"]);r!=null&&o(e,["videoBytes"],q(s,r));const l=i(n,["encoding"]);return l!=null&&o(e,["mimeType"],l),e}function Hi(s,n){const e={},t=i(n,["_self"]);return t!=null&&o(e,["video"],qi(s,t)),e}function Bi(s,n){const e={},t=i(n,["generatedSamples"]);t!=null&&(Array.isArray(t)?o(e,["generatedVideos"],t.map(a=>Hi(s,a))):o(e,["generatedVideos"],t));const r=i(n,["raiMediaFilteredCount"]);r!=null&&o(e,["raiMediaFilteredCount"],r);const l=i(n,["raiMediaFilteredReasons"]);return l!=null&&o(e,["raiMediaFilteredReasons"],l),e}function Yi(s,n){const e={},t=i(n,["name"]);t!=null&&o(e,["name"],t);const r=i(n,["metadata"]);r!=null&&o(e,["metadata"],r);const l=i(n,["done"]);l!=null&&o(e,["done"],l);const a=i(n,["error"]);a!=null&&o(e,["error"],a);const u=i(n,["response","generateVideoResponse"]);return u!=null&&o(e,["response"],Bi(s,u)),e}function $i(s,n){const e={},t=i(n,["videoMetadata"]);t!=null&&o(e,["videoMetadata"],t);const r=i(n,["thought"]);r!=null&&o(e,["thought"],r);const l=i(n,["codeExecutionResult"]);l!=null&&o(e,["codeExecutionResult"],l);const a=i(n,["executableCode"]);a!=null&&o(e,["executableCode"],a);const u=i(n,["fileData"]);u!=null&&o(e,["fileData"],u);const f=i(n,["functionCall"]);f!=null&&o(e,["functionCall"],f);const c=i(n,["functionResponse"]);c!=null&&o(e,["functionResponse"],c);const d=i(n,["inlineData"]);d!=null&&o(e,["inlineData"],d);const p=i(n,["text"]);return p!=null&&o(e,["text"],p),e}function Ki(s,n){const e={},t=i(n,["parts"]);t!=null&&(Array.isArray(t)?o(e,["parts"],t.map(l=>$i(s,l))):o(e,["parts"],t));const r=i(n,["role"]);return r!=null&&o(e,["role"],r),e}function Wi(s,n){const e={},t=i(n,["citations"]);return t!=null&&o(e,["citations"],t),e}function Ji(s,n){const e={},t=i(n,["content"]);t!=null&&o(e,["content"],Ki(s,t));const r=i(n,["citationMetadata"]);r!=null&&o(e,["citationMetadata"],Wi(s,r));const l=i(n,["finishMessage"]);l!=null&&o(e,["finishMessage"],l);const a=i(n,["finishReason"]);a!=null&&o(e,["finishReason"],a);const u=i(n,["avgLogprobs"]);u!=null&&o(e,["avgLogprobs"],u);const f=i(n,["groundingMetadata"]);f!=null&&o(e,["groundingMetadata"],f);const c=i(n,["index"]);c!=null&&o(e,["index"],c);const d=i(n,["logprobsResult"]);d!=null&&o(e,["logprobsResult"],d);const p=i(n,["safetyRatings"]);return p!=null&&o(e,["safetyRatings"],p),e}function on(s,n){const e={},t=i(n,["candidates"]);t!=null&&(Array.isArray(t)?o(e,["candidates"],t.map(c=>Ji(s,c))):o(e,["candidates"],t));const r=i(n,["createTime"]);r!=null&&o(e,["createTime"],r);const l=i(n,["responseId"]);l!=null&&o(e,["responseId"],l);const a=i(n,["modelVersion"]);a!=null&&o(e,["modelVersion"],a);const u=i(n,["promptFeedback"]);u!=null&&o(e,["promptFeedback"],u);const f=i(n,["usageMetadata"]);return f!=null&&o(e,["usageMetadata"],f),e}function zi(s,n){const e={},t=i(n,["truncated"]);t!=null&&o(e,["truncated"],t);const r=i(n,["token_count"]);return r!=null&&o(e,["tokenCount"],r),e}function Xi(s,n){const e={},t=i(n,["values"]);t!=null&&o(e,["values"],t);const r=i(n,["statistics"]);return r!=null&&o(e,["statistics"],zi(s,r)),e}function Qi(s,n){const e={},t=i(n,["billableCharacterCount"]);return t!=null&&o(e,["billableCharacterCount"],t),e}function Zi(s,n){const e={},t=i(n,["predictions[]","embeddings"]);t!=null&&(Array.isArray(t)?o(e,["embeddings"],t.map(l=>Xi(s,l))):o(e,["embeddings"],t));const r=i(n,["metadata"]);return r!=null&&o(e,["metadata"],Qi(s,r)),e}function Oi(s,n){const e={},t=i(n,["gcsUri"]);t!=null&&o(e,["gcsUri"],t);const r=i(n,["bytesBase64Encoded"]);r!=null&&o(e,["imageBytes"],q(s,r));const l=i(n,["mimeType"]);return l!=null&&o(e,["mimeType"],l),e}function In(s,n){const e={},t=i(n,["safetyAttributes","categories"]);t!=null&&o(e,["categories"],t);const r=i(n,["safetyAttributes","scores"]);r!=null&&o(e,["scores"],r);const l=i(n,["contentType"]);return l!=null&&o(e,["contentType"],l),e}function bi(s,n){const e={},t=i(n,["_self"]);t!=null&&o(e,["image"],Oi(s,t));const r=i(n,["raiFilteredReason"]);r!=null&&o(e,["raiFilteredReason"],r);const l=i(n,["_self"]);l!=null&&o(e,["safetyAttributes"],In(s,l));const a=i(n,["prompt"]);return a!=null&&o(e,["enhancedPrompt"],a),e}function ji(s,n){const e={},t=i(n,["predictions"]);t!=null&&(Array.isArray(t)?o(e,["generatedImages"],t.map(l=>bi(s,l))):o(e,["generatedImages"],t));const r=i(n,["positivePromptSafetyAttributes"]);return r!=null&&o(e,["positivePromptSafetyAttributes"],In(s,r)),e}function es(s,n){const e={},t=i(n,["endpoint"]);t!=null&&o(e,["name"],t);const r=i(n,["deployedModelId"]);return r!=null&&o(e,["deployedModelId"],r),e}function ns(s,n){const e={},t=i(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&o(e,["baseModel"],t);const r=i(n,["createTime"]);r!=null&&o(e,["createTime"],r);const l=i(n,["updateTime"]);return l!=null&&o(e,["updateTime"],l),e}function ts(s,n){const e={},t=i(n,["name"]);t!=null&&o(e,["name"],t);const r=i(n,["displayName"]);r!=null&&o(e,["displayName"],r);const l=i(n,["description"]);l!=null&&o(e,["description"],l);const a=i(n,["versionId"]);a!=null&&o(e,["version"],a);const u=i(n,["deployedModels"]);u!=null&&(Array.isArray(u)?o(e,["endpoints"],u.map(d=>es(s,d))):o(e,["endpoints"],u));const f=i(n,["labels"]);f!=null&&o(e,["labels"],f);const c=i(n,["_self"]);return c!=null&&o(e,["tunedModelInfo"],ns(s,c)),e}function os(s,n){const e={},t=i(n,["totalTokens"]);return t!=null&&o(e,["totalTokens"],t),e}function is(s,n){const e={},t=i(n,["tokensInfo"]);return t!=null&&o(e,["tokensInfo"],t),e}function ss(s,n){const e={},t=i(n,["gcsUri"]);t!=null&&o(e,["uri"],t);const r=i(n,["bytesBase64Encoded"]);r!=null&&o(e,["videoBytes"],q(s,r));const l=i(n,["mimeType"]);return l!=null&&o(e,["mimeType"],l),e}function rs(s,n){const e={},t=i(n,["_self"]);return t!=null&&o(e,["video"],ss(s,t)),e}function ls(s,n){const e={},t=i(n,["videos"]);t!=null&&(Array.isArray(t)?o(e,["generatedVideos"],t.map(a=>rs(s,a))):o(e,["generatedVideos"],t));const r=i(n,["raiMediaFilteredCount"]);r!=null&&o(e,["raiMediaFilteredCount"],r);const l=i(n,["raiMediaFilteredReasons"]);return l!=null&&o(e,["raiMediaFilteredReasons"],l),e}function us(s,n){const e={},t=i(n,["name"]);t!=null&&o(e,["name"],t);const r=i(n,["metadata"]);r!=null&&o(e,["metadata"],r);const l=i(n,["done"]);l!=null&&o(e,["done"],l);const a=i(n,["error"]);a!=null&&o(e,["error"],a);const u=i(n,["response"]);return u!=null&&o(e,["response"],ls(s,u)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const as="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function fs(s,n,e){let t,r;e.data instanceof Blob?r=JSON.parse(await e.data.text()):r=JSON.parse(e.data),s.isVertexAI()?t=xo(s,r):t=Po(s,r),n(t)}class cs{constructor(n,e,t){this.apiClient=n,this.auth=e,this.webSocketFactory=t}async connect(n){var e,t,r,l;const a=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let f;const c=hs(this.apiClient.getDefaultHeaders());if(this.apiClient.isVertexAI())f=`${a}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(c);else{const v=this.apiClient.getApiKey();f=`${a}/ws/google.ai.generativelanguage.${u}.GenerativeService.BidiGenerateContent?key=${v}`}let d=()=>{};const p=new Promise(v=>{d=v}),m=n.callbacks,h=function(){var v;(v=m==null?void 0:m.onopen)===null||v===void 0||v.call(m),d({})},g=this.apiClient,y={onopen:h,onmessage:v=>{fs(g,m.onmessage,v)},onerror:(e=m==null?void 0:m.onerror)!==null&&e!==void 0?e:function(v){},onclose:(t=m==null?void 0:m.onclose)!==null&&t!==void 0?t:function(v){}},C=this.webSocketFactory.create(f,ms(c),y);C.connect(),await p;let T=x(this.apiClient,n.model);if(this.apiClient.isVertexAI()&&T.startsWith("publishers/")){const v=this.apiClient.getProject(),A=this.apiClient.getLocation();T=`projects/${v}/locations/${A}/`+T}let E={};this.apiClient.isVertexAI()&&((r=n.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(n.config===void 0?n.config={responseModalities:[ee.AUDIO]}:n.config.responseModalities=[ee.AUDIO]),!((l=n.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const I={model:T,config:n.config,callbacks:n.callbacks};return this.apiClient.isVertexAI()?E=ro(this.apiClient,I):E=so(this.apiClient,I),delete E.config,C.send(JSON.stringify(E)),new ps(C,this.apiClient)}}const ds={turnComplete:!0};class ps{constructor(n,e){this.conn=n,this.apiClient=e}tLiveClientContent(n,e){if(e.turns!==null&&e.turns!==void 0){let t=[];try{t=S(n,e.turns),n.isVertexAI()?t=t.map(r=>$(n,r)):t=t.map(r=>ie(n,r))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof e.turns}'`)}return{clientContent:{turns:t,turnComplete:e.turnComplete}}}return{clientContent:{turnComplete:e.turnComplete}}}tLiveClientRealtimeInput(n,e){let t={};if(!("media"in e)||!e.media)throw new Error(`Failed to convert realtime input "media", type: '${typeof e.media}'`);return t={realtimeInput:{mediaChunks:[e.media],activityStart:e.activityStart,activityEnd:e.activityEnd}},t}tLiveClienttToolResponse(n,e){let t=[];if(e.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(e.functionResponses)?t=e.functionResponses:t=[e.functionResponses],t.length===0)throw new Error("functionResponses is required.");for(const l of t){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!n.isVertexAI()&&!("id"in l))throw new Error(as)}return{toolResponse:{functionResponses:t}}}sendClientContent(n){n=Object.assign(Object.assign({},ds),n);const e=this.tLiveClientContent(this.apiClient,n);this.conn.send(JSON.stringify(e))}sendRealtimeInput(n){if(n.media==null)throw new Error("Media is required.");const e=this.tLiveClientRealtimeInput(this.apiClient,n);this.conn.send(JSON.stringify(e))}sendToolResponse(n){if(n.functionResponses==null)throw new Error("Tool response parameters are required.");const e=this.tLiveClienttToolResponse(this.apiClient,n);this.conn.send(JSON.stringify(e))}close(){this.conn.close()}}function ms(s){const n={};return s.forEach((e,t)=>{n[t]=e}),n}function hs(s){const n=new Headers;for(const[e,t]of Object.entries(s))n.append(e,t);return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gs extends te{constructor(n){super(),this.apiClient=n,this.generateContent=async e=>await this.generateContentInternal(e),this.generateContentStream=async e=>await this.generateContentStreamInternal(e),this.generateImages=async e=>await this.generateImagesInternal(e).then(t=>{var r;let l;const a=[];if(t!=null&&t.generatedImages)for(const f of t.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((r=f==null?void 0:f.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=f==null?void 0:f.safetyAttributes:a.push(f);let u;return l?u={generatedImages:a,positivePromptSafetyAttributes:l}:u={generatedImages:a},u})}async generateContentInternal(n){var e,t;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=nn(this.apiClient,n);return l=_("{model}:generateContent",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(f=>f.json()),r.then(f=>{const c=on(this.apiClient,f),d=new z;return Object.assign(d,c),d})}else{const u=en(this.apiClient,n);return l=_("{model}:generateContent",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),r.then(f=>{const c=tn(this.apiClient,f),d=new z;return Object.assign(d,c),d})}}async generateContentStreamInternal(n){var e,t;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=nn(this.apiClient,n);l=_("{model}:streamGenerateContent?alt=sse",u._url),a=u._query,delete u.config,delete u._url,delete u._query;const f=this.apiClient;return r=f.requestStream({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}),r.then(function(c){return ne(this,arguments,function*(){var d,p,m,h;try{for(var g=!0,y=ue(c),C;C=yield D(y.next()),d=C.done,!d;g=!0){h=C.value,g=!1;const E=on(f,yield D(h.json())),I=new z;Object.assign(I,E),yield yield D(I)}}catch(T){p={error:T}}finally{try{!g&&!d&&(m=y.return)&&(yield D(m.call(y)))}finally{if(p)throw p.error}}})})}else{const u=en(this.apiClient,n);l=_("{model}:streamGenerateContent?alt=sse",u._url),a=u._query,delete u.config,delete u._url,delete u._query;const f=this.apiClient;return r=f.requestStream({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}),r.then(function(c){return ne(this,arguments,function*(){var d,p,m,h;try{for(var g=!0,y=ue(c),C;C=yield D(y.next()),d=C.done,!d;g=!0){h=C.value,g=!1;const E=tn(f,yield D(h.json())),I=new z;Object.assign(I,E),yield yield D(I)}}catch(T){p={error:T}}finally{try{!g&&!d&&(m=y.return)&&(yield D(m.call(y)))}finally{if(p)throw p.error}}})})}}async embedContent(n){var e,t;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=gi(this.apiClient,n);return l=_("{model}:predict",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(f=>f.json()),r.then(f=>{const c=Zi(this.apiClient,f),d=new We;return Object.assign(d,c),d})}else{const u=Jo(this.apiClient,n);return l=_("{model}:batchEmbedContents",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),r.then(f=>{const c=Ni(this.apiClient,f),d=new We;return Object.assign(d,c),d})}}async generateImagesInternal(n){var e,t;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=Ci(this.apiClient,n);return l=_("{model}:predict",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(f=>f.json()),r.then(f=>{const c=ji(this.apiClient,f),d=new Je;return Object.assign(d,c),d})}else{const u=Xo(this.apiClient,n);return l=_("{model}:predict",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),r.then(f=>{const c=Ui(this.apiClient,f),d=new Je;return Object.assign(d,c),d})}}async get(n){var e,t;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=Ti(this.apiClient,n);return l=_("{name}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(f=>f.json()),r.then(f=>ts(this.apiClient,f))}else{const u=Qo(this.apiClient,n);return l=_("{name}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),r.then(f=>ki(this.apiClient,f))}}async countTokens(n){var e,t;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=vi(this.apiClient,n);return l=_("{model}:countTokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(f=>f.json()),r.then(f=>{const c=os(this.apiClient,f),d=new ze;return Object.assign(d,c),d})}else{const u=Oo(this.apiClient,n);return l=_("{model}:countTokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),r.then(f=>{const c=Gi(this.apiClient,f),d=new ze;return Object.assign(d,c),d})}}async computeTokens(n){var e;let t,r="",l={};if(this.apiClient.isVertexAI()){const a=Ii(this.apiClient,n);return r=_("{model}:computeTokens",a._url),l=a._query,delete a.config,delete a._url,delete a._query,t=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(u=>u.json()),t.then(u=>{const f=is(this.apiClient,u),c=new at;return Object.assign(c,f),c})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(n){var e,t;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=Si(this.apiClient,n);return l=_("{model}:predictLongRunning",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(f=>f.json()),r.then(f=>us(this.apiClient,f))}else{const u=ei(this.apiClient,n);return l=_("{model}:predictLongRunning",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),r.then(f=>Yi(this.apiClient,f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ys(s,n){const e={},t=i(n,["operationName"]);t!=null&&o(e,["_url","operationName"],t);const r=i(n,["config"]);return r!=null&&o(e,["config"],r),e}function Cs(s,n){const e={},t=i(n,["operationName"]);t!=null&&o(e,["_url","operationName"],t);const r=i(n,["config"]);return r!=null&&o(e,["config"],r),e}function Ts(s,n){const e={},t=i(n,["operationName"]);t!=null&&o(e,["operationName"],t);const r=i(n,["resourceName"]);r!=null&&o(e,["_url","resourceName"],r);const l=i(n,["config"]);return l!=null&&o(e,["config"],l),e}function Es(s,n){const e={},t=i(n,["video","uri"]);t!=null&&o(e,["uri"],t);const r=i(n,["video","encodedVideo"]);r!=null&&o(e,["videoBytes"],q(s,r));const l=i(n,["encoding"]);return l!=null&&o(e,["mimeType"],l),e}function vs(s,n){const e={},t=i(n,["_self"]);return t!=null&&o(e,["video"],Es(s,t)),e}function Is(s,n){const e={},t=i(n,["generatedSamples"]);t!=null&&(Array.isArray(t)?o(e,["generatedVideos"],t.map(a=>vs(s,a))):o(e,["generatedVideos"],t));const r=i(n,["raiMediaFilteredCount"]);r!=null&&o(e,["raiMediaFilteredCount"],r);const l=i(n,["raiMediaFilteredReasons"]);return l!=null&&o(e,["raiMediaFilteredReasons"],l),e}function _s(s,n){const e={},t=i(n,["name"]);t!=null&&o(e,["name"],t);const r=i(n,["metadata"]);r!=null&&o(e,["metadata"],r);const l=i(n,["done"]);l!=null&&o(e,["done"],l);const a=i(n,["error"]);a!=null&&o(e,["error"],a);const u=i(n,["response","generateVideoResponse"]);return u!=null&&o(e,["response"],Is(s,u)),e}function As(s,n){const e={},t=i(n,["gcsUri"]);t!=null&&o(e,["uri"],t);const r=i(n,["bytesBase64Encoded"]);r!=null&&o(e,["videoBytes"],q(s,r));const l=i(n,["mimeType"]);return l!=null&&o(e,["mimeType"],l),e}function Ss(s,n){const e={},t=i(n,["_self"]);return t!=null&&o(e,["video"],As(s,t)),e}function Ms(s,n){const e={},t=i(n,["videos"]);t!=null&&(Array.isArray(t)?o(e,["generatedVideos"],t.map(a=>Ss(s,a))):o(e,["generatedVideos"],t));const r=i(n,["raiMediaFilteredCount"]);r!=null&&o(e,["raiMediaFilteredCount"],r);const l=i(n,["raiMediaFilteredReasons"]);return l!=null&&o(e,["raiMediaFilteredReasons"],l),e}function sn(s,n){const e={},t=i(n,["name"]);t!=null&&o(e,["name"],t);const r=i(n,["metadata"]);r!=null&&o(e,["metadata"],r);const l=i(n,["done"]);l!=null&&o(e,["done"],l);const a=i(n,["error"]);a!=null&&o(e,["error"],a);const u=i(n,["response"]);return u!=null&&o(e,["response"],Ms(s,u)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rs extends te{constructor(n){super(),this.apiClient=n}async getVideosOperation(n){const e=n.operation,t=n.config;if(e.name===void 0||e.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=e.name.split("/operations/")[0];let l;return t&&"httpOptions"in t&&(l=t.httpOptions),this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:r,config:{httpOptions:l}})}else return this.getVideosOperationInternal({operationName:e.name,config:t})}async getVideosOperationInternal(n){var e,t;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=Cs(this.apiClient,n);return l=_("{operationName}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(f=>f.json()),r.then(f=>sn(this.apiClient,f))}else{const u=ys(this.apiClient,n);return l=_("{operationName}",u._url),a=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=n.config)===null||t===void 0?void 0:t.httpOptions}).then(f=>f.json()),r.then(f=>_s(this.apiClient,f))}}async fetchPredictVideosOperationInternal(n){var e;let t,r="",l={};if(this.apiClient.isVertexAI()){const a=Ts(this.apiClient,n);return r=_("{resourceName}:fetchPredictOperation",a._url),l=a._query,delete a.config,delete a._url,delete a._query,t=this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions}).then(u=>u.json()),t.then(u=>sn(this.apiClient,u))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ps="Content-Type",xs="X-Server-Timeout",Ds="User-Agent",ws="x-goog-api-client",Ns="0.9.0",Vs=`google-genai-sdk/${Ns}`,Fs="v1beta1",Us="v1beta",rn=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Ls extends Error{constructor(n,e){e?super(n,{cause:e}):super(n,{cause:new Error().stack}),this.message=n,this.name="ClientError"}}class ln extends Error{constructor(n,e){e?super(n,{cause:e}):super(n,{cause:new Error().stack}),this.message=n,this.name="ServerError"}}class ks{constructor(n){var e,t;this.clientOptions=Object.assign(Object.assign({},n),{project:n.project,location:n.location,apiKey:n.apiKey,vertexai:n.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(e=this.clientOptions.apiVersion)!==null&&e!==void 0?e:Fs,this.getProject()||this.getLocation()?(r.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`,this.clientOptions.apiKey=void 0):(r.baseUrl="https://aiplatform.googleapis.com/",this.clientOptions.project=void 0,this.clientOptions.location=void 0)):(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:Us,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,n.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,n.httpOptions))}isVertexAI(){var n;return(n=this.clientOptions.vertexai)!==null&&n!==void 0?n:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(n){if(!n||n.baseUrl===void 0||n.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const t=[n.baseUrl.endsWith("/")?n.baseUrl.slice(0,-1):n.baseUrl];return n.apiVersion&&n.apiVersion!==""&&t.push(n.apiVersion),t.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const n=this.getBaseUrl(),e=new URL(n);return e.protocol="wss",e.toString()}setBaseUrl(n){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=n;else throw new Error("HTTP options are not correctly set.")}constructUrl(n,e,t){const r=[this.getRequestUrlInternal(e)];return t&&r.push(this.getBaseResourcePath()),n!==""&&r.push(n),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(n){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||n.path.startsWith("projects/")||n.httpMethod==="GET"&&n.path.startsWith("publishers/google/models"))}async request(n){let e=this.clientOptions.httpOptions;n.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,n.httpOptions));const t=this.shouldPrependVertexProjectPath(n),r=this.constructUrl(n.path,e,t);if(n.queryParams)for(const[a,u]of Object.entries(n.queryParams))r.searchParams.append(a,String(u));let l={};if(n.httpMethod==="GET"){if(n.body&&n.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=n.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,e),this.unaryApiCall(r,l,n.httpMethod)}patchHttpOptions(n,e){const t=JSON.parse(JSON.stringify(n));for(const[r,l]of Object.entries(e))typeof l=="object"?t[r]=Object.assign(Object.assign({},t[r]),l):l!==void 0&&(t[r]=l);return t}async requestStream(n){let e=this.clientOptions.httpOptions;n.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,n.httpOptions));const t=this.shouldPrependVertexProjectPath(n),r=this.constructUrl(n.path,e,t);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=n.body,l=await this.includeExtraHttpOptionsToRequestInit(l,e),this.streamApiCall(r,l,n.httpMethod)}async includeExtraHttpOptionsToRequestInit(n,e){if(e&&e.timeout&&e.timeout>0){const t=new AbortController,r=t.signal;setTimeout(()=>t.abort(),e.timeout),n.signal=r}return n.headers=await this.getHeadersInternal(e),n}async unaryApiCall(n,e,t){return this.apiCall(n.toString(),Object.assign(Object.assign({},e),{method:t})).then(async r=>(await un(r),new le(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(n,e,t){return this.apiCall(n.toString(),Object.assign(Object.assign({},e),{method:t})).then(async r=>(await un(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(n){var e;return ne(this,arguments,function*(){const r=(e=n==null?void 0:n.body)===null||e===void 0?void 0:e.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let a="";for(;;){const{done:u,value:f}=yield D(r.read());if(u){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=l.decode(f);a+=c;let d=a.match(rn);for(;d;){const p=d[1];try{const m=new Response(p,{headers:n==null?void 0:n.headers,status:n==null?void 0:n.status,statusText:n==null?void 0:n.statusText});yield yield D(new le(m)),a=a.slice(d[0].length),d=a.match(rn)}catch(m){throw new Error(`exception parsing stream chunk ${p}. ${m}`)}}}}finally{r.releaseLock()}})}async apiCall(n,e){return fetch(n,e).catch(t=>{throw new Error(`exception ${t} sending request`)})}getDefaultHeaders(){const n={},e=Vs+" "+this.clientOptions.userAgentExtra;return n[Ds]=e,n[ws]=e,n[Ps]="application/json",n}async getHeadersInternal(n){const e=new Headers;if(n&&n.headers){for(const[t,r]of Object.entries(n.headers))e.append(t,r);n.timeout&&n.timeout>0&&e.append(xs,String(Math.ceil(n.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(e),e}async uploadFile(n,e){var t;const r={};e!=null&&(r.mimeType=e.mimeType,r.name=e.name,r.displayName=e.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,a=await l.stat(n);r.sizeBytes=String(a.size);const u=(t=e==null?void 0:e.mimeType)!==null&&t!==void 0?t:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=u;const f=await this.fetchUploadUrl(r,e);return l.upload(n,f,this)}async fetchUploadUrl(n,e){var t;let r={};e!=null&&e.httpOptions?r=e.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${n.mimeType}`}};const l={file:n},a=await this.request({path:_("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:r});if(!a||!(a!=null&&a.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(t=a==null?void 0:a.headers)===null||t===void 0?void 0:t["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function un(s){var n;if(s===void 0)throw new ln("response is undefined");if(!s.ok){const e=s.status,t=s.statusText;let r;!((n=s.headers.get("content-type"))===null||n===void 0)&&n.includes("application/json")?r=await s.json():r={error:{message:"exception parsing response",code:s.status,status:s.statusText}};const l=`got status: ${e} ${t}. ${JSON.stringify(r)}`;throw e>=400&&e<500?new Ls(l):e>=500&&e<600?new ln(l):new Error(l)}}const Gs=1024*1024*8;async function qs(s,n,e){var t,r;let l=0,a=0,u=new le(new Response),f="upload";for(l=s.size;a<l;){const d=Math.min(Gs,l-a),p=s.slice(a,a+d);if(a+d>=l&&(f+=", finalize"),u=await e.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:n,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(a),"Content-Length":String(d)}}}),a+=d,((t=u==null?void 0:u.headers)===null||t===void 0?void 0:t["x-goog-upload-status"])!=="active")break;if(l<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const c=await(u==null?void 0:u.json());if(((r=u==null?void 0:u.headers)===null||r===void 0?void 0:r["x-goog-upload-status"])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return c.file}async function Hs(s){return{size:s.size,type:s.type}}class Bs{async upload(n,e,t){if(typeof n=="string")throw new Error("File path is not supported in browser uploader.");return await qs(n,e,t)}async stat(n){if(typeof n=="string")throw new Error("File path is not supported in browser uploader.");return await Hs(n)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ys{create(n,e,t){return new $s(n,e,t)}}class $s{constructor(n,e,t){this.url=n,this.headers=e,this.callbacks=t}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(n){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(n)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const an="x-goog-api-key";class Ks{constructor(n){this.apiKey=n}async addAuthHeaders(n){n.get(an)===null&&n.append(an,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ws="gl-node/";class Xs{constructor(n){var e;if(n.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(n.project||n.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(e=n.vertexai)!==null&&e!==void 0?e:!1,this.apiKey=n.apiKey,this.apiVersion=n.apiVersion;const t=new Ks(this.apiKey);this.apiClient=new ks({auth:t,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:n.httpOptions,userAgentExtra:Ws+"web",uploader:new Bs}),this.models=new gs(this.apiClient),this.live=new cs(this.apiClient,t,new Ys),this.chats=new yt(this.models,this.apiClient),this.caches=new pt(this.apiClient),this.files=new Dt(this.apiClient),this.operations=new Rs(this.apiClient)}}var Y={},fn;function Js(){if(fn)return Y;fn=1,Object.defineProperty(Y,"__esModule",{value:!0});var s=_n(),n=An(),e=function(){return e=Object.assign||function(f){for(var c,d=1,p=arguments.length;d<p;d++)for(var m in c=arguments[d])Object.prototype.hasOwnProperty.call(c,m)&&(f[m]=c[m]);return f},e.apply(this,arguments)};function t(f,c){var d,p;switch(c.type){case"TYPE":return e(e({},f),{speed:c.speed,text:(d=c.payload)===null||d===void 0?void 0:d.substring(0,f.text.length+1)});case"DELAY":return e(e({},f),{speed:c.payload});case"DELETE":return e(e({},f),{speed:c.speed,text:(p=c.payload)===null||p===void 0?void 0:p.substring(0,f.text.length-1)});case"COUNT":return e(e({},f),{count:f.count+1});default:return f}}var r=function(f){var c=f.words,d=c===void 0?["Hello World!","This is","a simple Typewriter"]:c,p=f.loop,m=p===void 0?1:p,h=f.typeSpeed,g=h===void 0?80:h,y=f.deleteSpeed,C=y===void 0?50:y,T=f.delaySpeed,E=T===void 0?1500:T,I=f.onLoopDone,v=f.onType,A=f.onDelete,M=f.onDelay,R=n.useReducer(t,{speed:g,text:"",count:0}),P=R[0],F=P.speed,N=P.text,H=P.count,L=R[1],k=n.useRef(0),U=n.useRef(!1),B=n.useRef(!1),W=n.useRef(!1),K=n.useRef(!1),fe=n.useCallback(function(){var J=H%d.length,se=d[J];B.current?(L({type:"DELETE",payload:se,speed:C}),N===""&&(B.current=!1,L({type:"COUNT"}))):(L({type:"TYPE",payload:se,speed:g}),W.current=!0,N===se&&(L({type:"DELAY",payload:E}),W.current=!1,K.current=!0,setTimeout(function(){K.current=!1,B.current=!0},E),m>0&&(k.current+=1,k.current/d.length===m&&(K.current=!1,U.current=!0)))),W.current&&v&&v(k.current),B.current&&A&&A(),K.current&&M&&M()},[H,E,C,m,g,d,N,v,A,M]);return n.useEffect(function(){var J=setTimeout(fe,F);return U.current&&clearTimeout(J),function(){return clearTimeout(J)}},[fe,F]),n.useEffect(function(){I&&U.current&&I()},[I]),[N,{isType:W.current,isDelay:K.current,isDelete:B.current,isDone:U.current}]},l="styles-module_blinkingCursor__yugAC",a="styles-module_blinking__9VXRT";(function(f,c){c===void 0&&(c={});var d=c.insertAt;if(typeof document<"u"){var p=document.head||document.getElementsByTagName("head")[0],m=document.createElement("style");m.type="text/css",d==="top"&&p.firstChild?p.insertBefore(m,p.firstChild):p.appendChild(m),m.styleSheet?m.styleSheet.cssText=f:m.appendChild(document.createTextNode(f))}})(".styles-module_blinkingCursor__yugAC{color:inherit;font:inherit;left:3px;line-height:inherit;opacity:1;position:relative;top:0}.styles-module_blinking__9VXRT{animation-duration:.8s;animation-iteration-count:infinite;animation-name:styles-module_blink__rqfaf}@keyframes styles-module_blink__rqfaf{0%{opacity:1}to{opacity:0}}");var u=n.memo(function(f){var c=f.cursorBlinking,d=c===void 0||c,p=f.cursorStyle,m=p===void 0?"|":p,h=f.cursorColor,g=h===void 0?"inherit":h;return s.jsx("span",e({style:{color:g},className:"".concat(l," ").concat(d?a:"")},{children:m}))});return Y.Cursor=u,Y.Typewriter=function(f){var c=f.words,d=c===void 0?["Hello World!","This is","a simple Typewriter"]:c,p=f.loop,m=p===void 0?1:p,h=f.typeSpeed,g=h===void 0?80:h,y=f.deleteSpeed,C=y===void 0?50:y,T=f.delaySpeed,E=T===void 0?1500:T,I=f.cursor,v=I!==void 0&&I,A=f.cursorStyle,M=A===void 0?"|":A,R=f.cursorColor,P=R===void 0?"inherit":R,F=f.cursorBlinking,N=F===void 0||F,H=f.onLoopDone,L=f.onType,k=f.onDelay,U=f.onDelete,B=r({words:d,loop:m,typeSpeed:g,deleteSpeed:C,delaySpeed:E,onLoopDone:H,onType:L,onDelay:k,onDelete:U})[0];return s.jsxs(s.Fragment,{children:[s.jsx("span",{children:B}),v&&s.jsx(u,{cursorStyle:M,cursorColor:P,cursorBlinking:N})]})},Y.useTypewriter=r,Y}var Qs=Js();export{Xs as G,Qs as d};
